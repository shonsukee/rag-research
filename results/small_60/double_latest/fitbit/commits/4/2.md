# LLM Response
```
#Used by Subtype: USER
sub fitbit_getSleepGoals($) {
  my ($hash) = @_;
  my $name = $hash->{NAME};
  my $userID = $hash->{USERID};

  Log3 $name, 4, "$name: fitbit_getSleepGoals() ".$hash->{USERID};
  return undef if( !defined($hash->{IODev}) );

  my $token = fitbit_decrypt( $hash->{IODev}->{helper}{token} );
  Log3 $name, 5, "$name: fitbit_getSleepGoals(): Use token from I/O Dev $hash->{IODev}->{NAME}";

  my $now = substr(TimeNow(),0,10);
  HttpUtils_NonblockingGet({
    url => "https://api.fitbit.com/1/user/-/sleep/goals.json",
    timeout => 30,
    noshutdown => 1,
    headers => {"Authorization" => 'Bearer '. $token, "Accept-Locale" => 'de_DE'},
    hash => $hash,
    type => 'sleepGoals',
    callback => \&fitbit_Dispatch,
  });

  $hash->{LAST_POLL} = TimeNow();
  readingsSingleUpdate( $hash, ".poll", gettimeofday(), 0 );
  return undef;
}
```

# User Query
## Instruction
You are a software engineer specializing in REST APIs.
Please follow the guidelines below to make the necessary modifications.

### Modification Procedure
1. Identify code snippets that follow deprecated specifications within the source code in `## Input Code`.
2. Analyze the latest specifications based on `### Technical Specifications for latest natural language` and `### Technical Specifications for latest code`.
3. Modify the code snippets identified in step 2. to follow the latest specifications analyzed in step 3., while paying attention to the points listed in `### Attention` below.

### Attention
There may be multiple code snippets following deprecated specifications within `## Input Code`.
Only refer to the information in `### Technical Specifications for Latest natural language` and `### Technical Specifications for Latest code` when making modifications.
Do not perform refactoring or add comments; only modify the parts of the code that follow deprecated specifications to conform to the latest specifications.
Copy the source code from `## Input Code` before making modifications.
Delete all parts only according to the deprecated specification and modify the code to conform to the latest specification.
Only modify the parts of the code that follow deprecated specifications.
If no deprecated specification is found in the source code of the `## Input Code`, compare the source code with the latest specification to identify any differences. If modifications are required, modify the source code according to the latest specification.
Make sure to modify all code that follows deprecated specifications.
After modifications, ensure that all code following deprecated specifications has been replaced with code that conforms to the latest specifications.
If multiple deprecated specifications are present within `## Input Code`, confirm that all are unified under the latest specifications.

## Input Code
```
#Used by Subtype: USER
sub fitbit_getSleepGoals($) {
  my ($hash) = @_;
  my $name = $hash->{NAME};
  my $userID = $hash->{USERID};

  Log3 $name, 4, "$name: fitbit_getSleepGoals() ".$hash->{USERID};
  return undef if( !defined($hash->{IODev}) );

  my $token = fitbit_decrypt( $hash->{IODev}->{helper}{token} );
  Log3 $name, 5, "$name: fitbit_getSleepGoals(): Use token from I/O Dev $hash->{IODev}->{NAME}";

  my $now = substr(TimeNow(),0,10);
  HttpUtils_NonblockingGet({
    url => "https://api.fitbit.com/1/user/-/sleep/goal.json",
    timeout => 30,
    noshutdown => 1,
    header => {"Authorization" => 'Bearer '. $token, "Accept-Locale" => 'de_DE'},
    hash => $hash,
    type => 'sleepGoals',
    callback => \&fitbit_Dispatch,
  });

  $hash->{LAST_POLL} = TimeNow();
  readingsSingleUpdate( $hash, ".poll", gettimeofday(), 0 );
  return undef;
}

```

## Technical Specifications for latest natural language
```
【Context No.1】
Heart rate data recorded by the device.
### Distance, pace and speed
The Fitbit devices use the following formulas to calculate distance, pace and
speed. Please note, stride length is approximated by the person's height and
gender.
`distance = steps * stride length`
`pace = time(sec) / distance`
`speed = distance / time(hour)`
Daily activity summary and auto-detected exercises' (recorded using Smart
Track) distance are estimated values based on steps and stride length. Devices
that support on-device or connected GPS will record distance, pace and speed
from the GPS data when the exercise is initiated using the on-device Exercise
application. If the person begins moving before receiving a GPS signal, steps
and stride length are used to calculate distance until the GPS connects.
Intraday distance values, returned by the Intraday endpoints or Activity TCX
endpoint, can be more accurate since they use the GPS data. To determine how
the exercise was recorded, see [ "logType" values](/build/reference/web-
api/activity/get-activity-log-list/#logType-values).
Some people have noticed that the standard formula for calculating pace and
speed doesn't always provide accurate results. That's because pace and speed
are calculated from the GPS data, while the total distance is an approximate
value based on how the tracker calculates distance (GPS vs steps & stride
length). The mobile application duplicates the tracker distance value by
displaying the exercise summary view. This is done to provide a better user
experience for the consumer. When the user drills down into the exercise
details, like data charts or maps, they should see the more accurate data
coming from the GPS or Intraday data.
Developers who need to display the most accurate distance values, we suggest
using only the intraday distance data points instead of the activity summary.
See [ How does my Fitbit device calcuate my daily
activity?](https://support.google.com/fitbit/answer/14237111) for more
information.
### Webhook notifications
The Fitbit Web API can send notifications when a Fitbit user has new data to
download. This is possible by implementing the Subscription API and
subscribing to one or more data collections. See [ Using
Subscriptions](/build/reference/web-api/developer-guide/using-subscriptions/).

【Context No.2】
### Distance, pace and speed
The Fitbit devices use the following formulas to calculate distance, pace and
speed. Please note, stride length is approximated by the person's height and
gender.
`distance = steps * stride length`
`pace = time(sec) / distance`
`speed = distance / time(hour)`
Daily activity summary and auto-detected exercises' (recorded using Smart
Track) distance are estimated values based on steps and stride length. Devices
that support on-device or connected GPS will record distance, pace and speed
from the GPS data when the exercise is initiated using the on-device Exercise
application. If the person begins moving before receiving a GPS signal, steps
and stride length are used to calculate distance until the GPS connects.
Intraday distance values, returned by the Intraday endpoints or Activity TCX
endpoint, can be more accurate since they use the GPS data. To determine how
the exercise was recorded, see [ "logType" values](/build/reference/web-
api/activity/get-activity-log-list/#logType-values).
Some people have noticed that the standard formula for calculating pace and
speed doesn't always provide accurate results. That's because pace and speed
are calculated from the GPS data, while the total distance is an approximate
value based on how the tracker calculates distance (GPS vs steps & stride
length). The mobile application duplicates the tracker distance value by
displaying the exercise summary view. This is done to provide a better user
experience for the consumer. When the user drills down into the exercise
details, like data charts or maps, they should see the more accurate data
coming from the GPS or Intraday data.
Developers who need to display the most accurate distance values, we suggest
using only the intraday distance data points instead of the activity summary.
See [ How does my Fitbit device calcuate my daily
activity?](https://support.google.com/fitbit/answer/14237111) for more
information.
### Webhook notifications
The Fitbit Web API can send notifications when a Fitbit user has new data to
download. This is possible by implementing the Subscription API and
subscribing to one or more data collections. See [ Using
Subscriptions](/build/reference/web-api/developer-guide/using-subscriptions/).
Whenever the activity service recognizes a change to the user’s data, a
notification is sent to your application’s subscriber.

【Context No.3】
If the person begins moving before receiving a GPS signal, steps
and stride length are used to calculate distance until the GPS connects.
Intraday distance values, returned by the Intraday endpoints or Activity TCX
endpoint, can be more accurate since they use the GPS data. To determine how
the exercise was recorded, see [ "logType" values](/build/reference/web-
api/activity/get-activity-log-list/#logType-values).
Some people have noticed that the standard formula for calculating pace and
speed doesn't always provide accurate results. That's because pace and speed
are calculated from the GPS data, while the total distance is an approximate
value based on how the tracker calculates distance (GPS vs steps & stride
length). The mobile application duplicates the tracker distance value by
displaying the exercise summary view. This is done to provide a better user
experience for the consumer. When the user drills down into the exercise
details, like data charts or maps, they should see the more accurate data
coming from the GPS or Intraday data.
Developers who need to display the most accurate distance values, we suggest
using only the intraday distance data points instead of the activity summary.
See [ How does my Fitbit device calcuate my daily
activity?](https://support.google.com/fitbit/answer/14237111) for more
information.
[![previous](/images/next-4a798552f1301bc41839afd0a22e5e82.svg)](/build/reference/web-
api/activity/get-frequent-activities/)
[Get Frequent Activities](/build/reference/web-api/activity/get-frequent-
activities/)
[Get Recent Activity Types](/build/reference/web-api/activity/get-recent-
activity-types/)
[![next](/images/next-4a798552f1301bc41839afd0a22e5e82.svg)](/build/reference/web-
api/activity/get-recent-activity-types/)

【Context No.4】
Intraday distance values, returned by the Intraday endpoints or Activity TCX
endpoint, can be more accurate since they use the GPS data. To determine how
the exercise was recorded, see [ "logType" values](/build/reference/web-
api/activity/get-activity-log-list/#logType-values).
Some people have noticed that the standard formula for calculating pace and
speed doesn't always provide accurate results. That's because pace and speed
are calculated from the GPS data, while the total distance is an approximate
value based on how the tracker calculates distance (GPS vs steps & stride
length). The mobile application duplicates the tracker distance value by
displaying the exercise summary view. This is done to provide a better user
experience for the consumer. When the user drills down into the exercise
details, like data charts or maps, they should see the more accurate data
coming from the GPS or Intraday data.
Developers who need to display the most accurate distance values, we suggest
using only the intraday distance data points instead of the activity summary.
See [ How does my Fitbit device calcuate my daily
activity?](https://support.google.com/fitbit/answer/14237111) for more
information.
[![previous](/images/next-4a798552f1301bc41839afd0a22e5e82.svg)](/build/reference/web-
api/activity/get-lifetime-stats/)
[Get Lifetime Stats](/build/reference/web-api/activity/get-lifetime-stats/)

【Context No.5】
### Distance, pace and speed
The Fitbit devices use the following formulas to calculate distance, pace and
speed. Please note, stride length is approximated by the person's height and
gender.
`distance = steps * stride length`
`pace = time(sec) / distance`
`speed = distance / time(hour)`
Daily activity summary and auto-detected exercises' (recorded using Smart
Track) distance are estimated values based on steps and stride length. Devices
that support on-device or connected GPS will record distance, pace and speed
from the GPS data when the exercise is initiated using the on-device Exercise
application. If the person begins moving before receiving a GPS signal, steps
and stride length are used to calculate distance until the GPS connects.
Intraday distance values, returned by the Intraday endpoints or Activity TCX
endpoint, can be more accurate since they use the GPS data. To determine how
the exercise was recorded, see [ "logType" values](/build/reference/web-
api/activity/get-activity-log-list/#logType-values).
Some people have noticed that the standard formula for calculating pace and
speed doesn't always provide accurate results. That's because pace and speed
are calculated from the GPS data, while the total distance is an approximate
value based on how the tracker calculates distance (GPS vs steps & stride
length). The mobile application duplicates the tracker distance value by
displaying the exercise summary view. This is done to provide a better user
experience for the consumer. When the user drills down into the exercise
details, like data charts or maps, they should see the more accurate data
coming from the GPS or Intraday data.
Developers who need to display the most accurate distance values, we suggest
using only the intraday distance data points instead of the activity summary.
See [ How does my Fitbit device calcuate my daily
activity?](https://support.google.com/fitbit/answer/14237111) for more
information.
[![previous](/images/next-4a798552f1301bc41839afd0a22e5e82.svg)](/build/reference/web-
api/activity/delete-favorite-activity/)
[Delete Favorite Activity](/build/reference/web-api/activity/delete-favorite-
activity/)
[Get Activity Log List](/build/reference/web-api/activity/get-activity-log-
list/)
[!

【Context No.6】
Devices
that support on-device or connected GPS will record distance, pace and speed
from the GPS data when the exercise is initiated using the on-device Exercise
application. If the person begins moving before receiving a GPS signal, steps
and stride length are used to calculate distance until the GPS connects.
Intraday distance values, returned by the Intraday endpoints or Activity TCX
endpoint, can be more accurate since they use the GPS data. To determine how
the exercise was recorded, see [ "logType" values](/build/reference/web-
api/activity/get-activity-log-list/#logType-values).
Some people have noticed that the standard formula for calculating pace and
speed doesn't always provide accurate results. That's because pace and speed
are calculated from the GPS data, while the total distance is an approximate
value based on how the tracker calculates distance (GPS vs steps & stride
length). The mobile application duplicates the tracker distance value by
displaying the exercise summary view. This is done to provide a better user
experience for the consumer. When the user drills down into the exercise
details, like data charts or maps, they should see the more accurate data
coming from the GPS or Intraday data.
Developers who need to display the most accurate distance values, we suggest
using only the intraday distance data points instead of the activity summary.
See [ How does my Fitbit device calcuate my daily
activity?](https://support.google.com/fitbit/answer/14237111) for more
information.
### Webhook notifications
The Fitbit Web API can send notifications when a Fitbit user has new data to
download. This is possible by implementing the Subscription API and
subscribing to one or more data collections. See [ Using
Subscriptions](/build/reference/web-api/developer-guide/using-subscriptions/).
Whenever the activity service recognizes a change to the user’s data, a
notification is sent to your application’s subscriber.
The activity collection recognizes changes to a user’s recorded activities,
step count, calories burned, distance traveled, etc. Keep in mind that even
when a person is not in motion, their body is burning calories. It’s possible
to receive activity notifications representing calorie burn even when the user
is sleeping or stationary. Today, you cannot subscribe to a subset of the
user’s activity data.

【Context No.7】
This value is calculated minute by minute for minutes that fall within this criteria. This includes activity burned calories and BMR.
  * **tracker/calories** \- Calories burned inclusive of BMR according to movement captured by a Fitbit tracker.
  * **tracker/activityCalories** \- Calculated similarly to _activityCalories_ , but uses only tracker data. Manually logged activities are excluded.
### Distance, pace and speed
The Fitbit devices use the following formulas to calculate distance, pace and
speed. Please note, stride length is approximated by the person's height and
gender.
`distance = steps * stride length`
`pace = time(sec) / distance`
`speed = distance / time(hour)`
Daily activity summary and auto-detected exercises' (recorded using Smart
Track) distance are estimated values based on steps and stride length. Devices
that support on-device or connected GPS will record distance, pace and speed
from the GPS data when the exercise is initiated using the on-device Exercise
application. If the person begins moving before receiving a GPS signal, steps
and stride length are used to calculate distance until the GPS connects.
Intraday distance values, returned by the Intraday endpoints or Activity TCX
endpoint, can be more accurate since they use the GPS data. To determine how
the exercise was recorded, see [ "logType" values](/build/reference/web-
api/activity/get-activity-log-list/#logType-values).
Some people have noticed that the standard formula for calculating pace and
speed doesn't always provide accurate results. That's because pace and speed
are calculated from the GPS data, while the total distance is an approximate
value based on how the tracker calculates distance (GPS vs steps & stride
length). The mobile application duplicates the tracker distance value by
displaying the exercise summary view. This is done to provide a better user
experience for the consumer. When the user drills down into the exercise
details, like data charts or maps, they should see the more accurate data
coming from the GPS or Intraday data.
Developers who need to display the most accurate distance values, we suggest
using only the intraday distance data points instead of the activity summary.
See [ How does my Fitbit device calcuate my daily
activity?](https://support.google.com/fitbit/answer/14237111) for more
information.

【Context No.8】
* **caloriesBMR** \- Value includes only [BMR](https://en.wikipedia.org/wiki/Basal_metabolic_rate) calories.
  * **activityCalories** \- The number of calories burned during the day for periods of time when the user was active above sedentary level. This value is calculated minute by minute for minutes that fall within this criteria. This includes activity burned calories and BMR.
  * **tracker/calories** \- Calories burned inclusive of BMR according to movement captured by a Fitbit tracker.
  * **tracker/activityCalories** \- Calculated similarly to _activityCalories_ , but uses only tracker data. Manually logged activities are excluded.
### Distance, pace and speed
The Fitbit devices use the following formulas to calculate distance, pace and
speed. Please note, stride length is approximated by the person's height and
gender.
`distance = steps * stride length`
`pace = time(sec) / distance`
`speed = distance / time(hour)`
Daily activity summary and auto-detected exercises' (recorded using Smart
Track) distance are estimated values based on steps and stride length. Devices
that support on-device or connected GPS will record distance, pace and speed
from the GPS data when the exercise is initiated using the on-device Exercise
application. If the person begins moving before receiving a GPS signal, steps
and stride length are used to calculate distance until the GPS connects.
Intraday distance values, returned by the Intraday endpoints or Activity TCX
endpoint, can be more accurate since they use the GPS data. To determine how
the exercise was recorded, see [ "logType" values](/build/reference/web-
api/activity/get-activity-log-list/#logType-values).
Some people have noticed that the standard formula for calculating pace and
speed doesn't always provide accurate results. That's because pace and speed
are calculated from the GPS data, while the total distance is an approximate
value based on how the tracker calculates distance (GPS vs steps & stride
length). The mobile application duplicates the tracker distance value by
displaying the exercise summary view. This is done to provide a better user
experience for the consumer. When the user drills down into the exercise
details, like data charts or maps, they should see the more accurate data
coming from the GPS or Intraday data.

【Context No.9】
When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.
**Response Codes**
200 | A successful request.
---|---
400 | The request had bad syntax or was inherently impossible to be satisfied.
401 | The request requires user authentication.
> **Note:** For a complete list of response codes, please refer to the
> [Troubleshooting Guide](/build/reference/web-api/troubleshooting-
> guide/error-messages/).

## Additional Information
Using units in the unit system which corresponds to the Accept-Language header
provided.
### "logType" values
The source of the activity log can be determined by the _logType_ response
element.
  * `auto_detected` activity logs are those created by Fitbit’s SmartTrack feature.
  * `manual` activity logs are user specified overrides of some or all tracker data.
  * `mobile_run` activity logs are created after completing a MobileRun.
  * `tracker` activity logs are those created using the multisport exercise mode on a Fitbit device.
### Distance, pace and speed
The Fitbit devices use the following formulas to calculate distance, pace and
speed. Please note, stride length is approximated by the person's height and
gender.
`distance = steps * stride length`
`pace = time(sec) / distance`
`speed = distance / time(hour)`
Daily activity summary and auto-detected exercises' (recorded using Smart
Track) distance are estimated values based on steps and stride length. Devices
that support on-device or connected GPS will record distance, pace and speed
from the GPS data when the exercise is initiated using the on-device Exercise
application. If the person begins moving before receiving a GPS signal, steps
and stride length are used to calculate distance until the GPS connects.
Intraday distance values, returned by the Intraday endpoints or Activity TCX
endpoint, can be more accurate since they use the GPS data. To determine how
the exercise was recorded, see [ "logType" values](/build/reference/web-
api/activity/get-activity-log-list/#logType-values).
Some people have noticed that the standard formula for calculating pace and
speed doesn't always provide accurate results. That's because pace and speed
are calculated from the GPS data, while the total distance is an approximate
value based on how the tracker calculates distance (GPS vs steps & stride
length).

【Context No.10】
5. If BMR or EER have been used to estimate calories for the whole specific day (no tracker data), intraday data for calories would be flat and estimated according to the simple equation **calories_1m = BMR(EER)/24/60.**
#### Using BMR/EER Algorithms
If a user had no Fitbit tracker data for the specific day then the greater of
Logged Activities + BMR (for minutes when there is no activity) and the
calories calculated from the EER for that day (if EER enabled for this user's
profile) are taken. In case, there was some data from the tracker for the
specific day, that data where available is used and for time where data is
unavailable, the BMR is used. If the total is less than 20% greater than BMR
then the EER (cals < EER * 0.8) is used. EER never used to calculate calories
for today.
#### Using BMR Formula
Fitbit uses the standard MD Mifflin-St Jeor equation:
#### EER Formula (TEE total energy expenditure)
The EER Formula is based on
<http://www.cdc.gov/pcd/issues/2006/oct/pdf/06_0034.pdf>, which in turn is
based on "Food and Nutrition Board. Dietary reference intakes for energy,
carbohydrate, fiber, fat, fatty acids, cholesterol, protein, and amino acids
(macronutrients). Washington (DC): National Academy Press; 2005."
[http://www.nap.edu/openbook.php?isbn=0309085373&page=204](http://www.nap.edu/openbook.php?isbn=0309085373&page=204)
#### MALE-based EER Formula:
#### FEMALE-based EER Formula:
### Distance, pace and speed
The Fitbit devices use the following formulas to calculate distance, pace and
speed. Please note, stride length is approximated by the person's height and
gender.
`distance = steps * stride length`
`pace = time(sec) / distance`
`speed = distance / time(hour)`
Daily activity summary and auto-detected exercises' (recorded using Smart
Track) distance are estimated values based on steps and stride length.

【Context No.11】
That's because pace and speed
are calculated from the GPS data, while the total distance is an approximate
value based on how the tracker calculates distance (GPS vs steps & stride
length). The mobile application duplicates the tracker distance value by
displaying the exercise summary view. This is done to provide a better user
experience for the consumer. When the user drills down into the exercise
details, like data charts or maps, they should see the more accurate data
coming from the GPS or Intraday data.
Developers who need to display the most accurate distance values, we suggest
using only the intraday distance data points instead of the activity summary.
See [ How does my Fitbit device calcuate my daily
activity?](https://support.google.com/fitbit/answer/14237111) for more
information.
### "offset" query parameter
The offset query parameter is not fully supported and it's future is unknown.
Therefore, the only supported value is 0. To paginate, request the next and
previous links in the pagination response object. Using the "offset" query
parameter in any other capacity could cause your application to break.
### Webhook notifications
The Fitbit Web API can send notifications when a Fitbit user has new data to
download. This is possible by implementing the Subscription API and
subscribing to one or more data collections. See [ Using
Subscriptions](/build/reference/web-api/developer-guide/using-subscriptions/).
Whenever the activity service recognizes a change to the user’s data, a
notification is sent to your application’s subscriber.
The activity collection recognizes changes to a user’s recorded activities,
step count, calories burned, distance traveled, etc. Keep in mind that even
when a person is not in motion, their body is burning calories. It’s possible
to receive activity notifications representing calorie burn even when the user
is sleeping or stationary. Today, you cannot subscribe to a subset of the
user’s activity data. So, it is the responsibility of your application to
query the necessary activity endpoint(s) to reconcile the data in your system.
[!

【Context No.12】
# Client Credentials Grant Flow
The /oauth2/token endpoint can do the following:
  * Exchange the authorization code for the initial access token and refresh token (See [OAuth2 Token](/build/reference/web-api/authorization/oauth2-token)).
This process is required when using the Authorization Code Grant Flow [with
PKCE].
  * Obtain a new access token and refresh token when the existing access token has expired (See [Refresh Token](/build/reference/web-api/authorization/refresh-token/)).
  * Initiate the Client Credentials authorization flow (See [Client Credentials](/build/reference/web-api/authorization/client-credentials/)).
Fitbit follows the OAuth 2.0 Client Credentials flow as specified in [RFC
6749](https://datatracker.ietf.org/doc/html/rfc6749#section-1.3.4). This
authorization flow is used with specific Fitbit API endpoints related to
business operations. It is not supported by the public Web APIs to retrieve
Fitbit user data.
The Client Credentials Grant flow has the following steps:
  1. The application sends a request to https://api.fitbit.com/oauth2/token with its client_id and client_secret; and
  2. Fitbit authenticates your application and issues an access token.
* * *
## Request
POST | /oauth2/token
---|---
**Body Parameters**
**grant_type**
_required_ | **Supported:** client_credentials **Type:** string
---|---
**expires_in**
_optional_ | Pre-select the desired access token lifetime. `3600` for 1 hour
`28800` for 8 hours
`86400` for 1 day
`604800` for 1 week
`2592000` for 30 days
`31536000` for 1 year **Default:** 28800 **Type:** string
**Request Headers** authorization | required | Must be set to Basic followed by a space, then the Base64 encoded string of your application's client id and secret concatenated with a colon. For example, the Base64 encoded string, **Y2xpZW50X2lkOmNsaWVudCBzZWNyZXQ=** , is decoded as **"client_id:client secret"**. **Token type:** `Basic`
---|---|---
accept | optional | The media type of the response content the client is expecting.

【Context No.13】
# Get Activity TCX
The Training Center XML (TCX) is a data exchange format that contains GPS,
heart rate, and lap data. This endpoint retrieves the details of a user's
location using GPS and heart rate data during a logged exercise.
**Scope:** _activity_ and _location_
* * *
## Request
GET |  /1/user/[user-id]/activities/[log-id].tcx
---|---
**URI Arguments**
user-id | required | The encoded ID of the user. Use "-" (dash) for current logged-in user.
---|---|---
log-id | required | The activity's log ID.
**Query Parameters**
includePartialTCX | optional | Includes the TCX points when the GPS data is not available. | boolean
---|---|---|---
**Request Headers** authorization | required | Specify the token type and Fitbit user’s access token.
**Token type:** `Bearer`
---|---|---
accept | optional | The media type of the response content the client is expecting.
**Supported:** `application/vnd.garmin.tcx+xml`
accept-language | recommended | The measurement unit system to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
accept-locale | optional | The locale to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
**Examples**
  * URL
  * CURL
GET
https://api.fitbit.com/1/user/-/activities/20510012273.tcx?includePartialTCX=true
GET
https://api.fitbit.com/1/user/GGNJL9/activities/20510012273.tcx?includePartialTCX=true
curl -X GET
"https://api.fitbit.com/1/user/-/activities/20510012273.tcx?includePartialTCX=true
\"
-H "accept: application/json" \
-H "authorization: Bearer <access_token>"

* * *
## Response
  * Description
  * Example Response
Element Name | Description
---|---
Activity : Sport |
Activity : Id | The identifier or timestamp of the associated exercise.
Lap : StartTime | Timestamp representing each lap's start time.
Lap : TotalTimeSeconds | Length of the exercise lap in seconds.
Lap : DistanceMeters | Number of meters traveled during the exercise lap.

【Context No.14】
Dietary reference intakes for energy,
carbohydrate, fiber, fat, fatty acids, cholesterol, protein, and amino acids
(macronutrients). Washington (DC): National Academy Press; 2005."
[http://www.nap.edu/openbook.php?isbn=0309085373&page=204](http://www.nap.edu/openbook.php?isbn=0309085373&page=204)
#### MALE-based EER Formula:
#### FEMALE-based EER Formula:
### Distance, pace and speed
The Fitbit devices use the following formulas to calculate distance, pace and
speed. Please note, stride length is approximated by the person's height and
gender.
`distance = steps * stride length`
`pace = time(sec) / distance`
`speed = distance / time(hour)`
Daily activity summary and auto-detected exercises' (recorded using Smart
Track) distance are estimated values based on steps and stride length. Devices
that support on-device or connected GPS will record distance, pace and speed
from the GPS data when the exercise is initiated using the on-device Exercise
application. If the person begins moving before receiving a GPS signal, steps
and stride length are used to calculate distance until the GPS connects.
Intraday distance values, returned by the Intraday endpoints or Activity TCX
endpoint, can be more accurate since they use the GPS data. To determine how
the exercise was recorded, see [ "logType" values](/build/reference/web-
api/activity/get-activity-log-list/#logType-values).
Some people have noticed that the standard formula for calculating pace and
speed doesn't always provide accurate results. That's because pace and speed
are calculated from the GPS data, while the total distance is an approximate
value based on how the tracker calculates distance (GPS vs steps & stride
length). The mobile application duplicates the tracker distance value by
displaying the exercise summary view. This is done to provide a better user
experience for the consumer. When the user drills down into the exercise
details, like data charts or maps, they should see the more accurate data
coming from the GPS or Intraday data.
Developers who need to display the most accurate distance values, we suggest
using only the intraday distance data points instead of the activity summary.
See [ How does my Fitbit device calcuate my daily
activity?

【Context No.15】
activities-<resource>-intraday : dataset : mets  | METs value at the moment when the resource was recorded.
Returned only when resource = calories.
activities-<resource>-intraday : dataset : time | The time of the recorded resource.
activities-<resource>-intraday : dataset : value | The specified resource's value at the time it is recorded.

**Response Headers**
content-type | The media type of the response content being sent to the client.
**Supported:** `application/json`
---|---
fitbit-rate-limit-limit | The quota number of calls.
fitbit-rate-limit-remaining | The number of calls remaining before hitting the rate limit.
fitbit-rate-limit-reset | The number of seconds until the rate limit resets.
> **Note:** The rate limit headers are approximate and asynchronously updated.
> This means that there may be a minor delay in the decrementing of remaining
> requests. This could result in your application receiving an unexpected 429
> response if you don't track the total number of requests you make yourself.

**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-messages/).
---|---
Status Message | Description of the status code.
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.
**Response Codes**
200 | A successful request.
---|---
400 | The request had bad syntax or was inherently impossible to be satisfied.
401 | The request requires user authentication.
> **Note:** For a complete list of response codes, please refer to the
> [Troubleshooting Guide](/build/reference/web-api/troubleshooting-
> guide/error-messages/).

## Additional Information
Access to the Intraday Time Series for personal use (accessing your own data)
is available through the "Personal" App Type.
**Restriction** : Activity Intraday data cannot be retrieved for more than a
24 hour period. Any requests that expand over a 24 hour period will result
with the summary data for the date range specified.
The activity intraday time series data for a given resource is returned in the
format requested. The endpoint mimics the Get Activity Time Series endpoints.

【Context No.16】
activities : originalDuration | The initial length in time (milliseconds) that the exercise was recorded. This value will contain pauses during the exercise.
activities : originalStartTime | The initial start datetime that the exercise was recorded.
activities : pace | Calculated average pace during the exercise.
activities : source : id | Identifier associated to the source of the exercise. If the source is a 3rd party applicaton, the ID will be the application's client ID.
activities : source : name | The name associated with the source identifier.
activities : source : trackerFeatures | **Supported**:`CALORIES` | `DISTANCE` | `ELEVATION` | `GPS` | `HEARTRATE` | `PACE` | `STEPS` | `VO2_MAX`****
activities : source : type | The source type.
activities : source : url | The URL associated with the source.
activities : speed | Average speed during the exercise.
activities : startTime | The start datetime after the exercise was edited. If the exercise was not edited, the startTime = originalStartTime.
activities : steps | Number of steps taken during the exercise.
activities : tcxLink | URL to download the TCX file.
pagination : afterDate |
pagination : limit |
pagination : next |
pagination : offset |
pagination : previous |
pagination : sort |

**Response Headers**
content-type | The media type of the response content being sent to the client.
**Supported:** `application/json`
---|---
fitbit-rate-limit-limit | The quota number of calls.
fitbit-rate-limit-remaining | The number of calls remaining before hitting the rate limit.
fitbit-rate-limit-reset | The number of seconds until the rate limit resets.
> **Note:** The rate limit headers are approximate and asynchronously updated.
> This means that there may be a minor delay in the decrementing of remaining
> requests. This could result in your application receiving an unexpected 429
> response if you don't track the total number of requests you make yourself.

**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-messages/).
---|---
Status Message | Description of the status code.
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.
**Response Codes**
200 | A successful request.

【Context No.17】
The following is an example of a response for daily activity goals.
The following is an example of a response for weekly activity goals.

**Response Headers**
content-type | The media type of the response content being sent to the client.
**Supported:** `application/json`
---|---
fitbit-rate-limit-limit | The quota number of calls.
fitbit-rate-limit-remaining | The number of calls remaining before hitting the rate limit.
fitbit-rate-limit-reset | The number of seconds until the rate limit resets.
> **Note:** The rate limit headers are approximate and asynchronously updated.
> This means that there may be a minor delay in the decrementing of remaining
> requests. This could result in your application receiving an unexpected 429
> response if you don't track the total number of requests you make yourself.

**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-messages/).
---|---
Status Message | Description of the status code.
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.
**Response Codes**
200 | A successful request.
---|---
400 | The request had bad syntax or was inherently impossible to be satisfied.
401 | The request requires user authentication.
> **Note:** For a complete list of response codes, please refer to the
> [Troubleshooting Guide](/build/reference/web-api/troubleshooting-
> guide/error-messages/).

## Additional Information
The response uses the measurement units as defined in the unit system, which
corresponds to the Accept-Language header provided.
#### Considerations
  * Only the current goals are returned.
  * Floors goal only returned for users who currently or have previously paired a Fitbit device with an altimeter.
  * Calories out goal represents either dynamic daily target from the Premium trainer plan or manual calorie burn goal.
The default daily goal values are:
  * 10 floors;
  * 30 active minutes; and
  * Calories out is user specific, which accounts for BMR.
### Distance, pace and speed
The Fitbit devices use the following formulas to calculate distance, pace and
speed. Please note, stride length is approximated by the person's height and
gender.

【Context No.18】
The space in this parameter value needs to be URL encoded. **Type:** string
**state**
_recommended_ | Provides any state that might be useful to your application when the user is redirected back to your application. This parameter will be added to the redirect URI exactly as your application specifies. Fitbit strongly recommend including an anti-forgery token in this parameter and confirming its value in the redirect to mitigate against cross-site request forgery (CSRF). **Type:** string
**code_challenge**
(For use with PKCE only)
_optional / required_ | The code challenge is derived from the code verifier by using a transformation on the code verifier. The code verifier is a cryptographically random string dynamically created for each authorization request. The available transformations are `S256 ` and `plain`. `S256`: must be used if supported by the client:
_code_challenge = BASE64URL-ENCODE(SHA256(ASCII(code_verifier)))_.
`plain`: does not mitigate as wide a range of attacks as `S256` and may be
used only if the client cannot technically support `S256`: _code_challenge =
code_verifier_. **Default:** plain **Type:** string
**code_challenge_method**
(For use with PKCE only)
_optional_ | Code verifier transformation method is `S256` or `plain`. **Default:** plain **Type:** string


**Examples**
**Authorization Code Grant Flow with PKCE (recommended)** **Authorization Code
Grant Flow** **Implicit Grant Flow**
---

* * *
## Response
  * Description
  * Example Response
URL Parameter | Description
---|---
code
| The authorization code which needs to be exchanges for the access token and
refresh token.
_Returned with Authorization Code Grant Flow [with PKCE]._
access_token
| The Fitbit user's access token.
_Returned with Implicit Grant Flow._
user_id | The Fitbit user id.
_Returned with Implicit Grant Flow._
token_type | **Supported** : Bearer
_Returned with Implicit Grant Flow._
expires_in | Time when the access token expires.
_Returned with Implicit Grant Flow._
scope | List of scopes enabled by the Fitbit user.
_Returned with Implicit Grant Flow._
**Authorization Code Grant Flow [with PKCE]** **Implicit Grant Flow**

**Response Headers**
content-type | The media type of the response content being sent to the client.

【Context No.19】
> **Note:** The rate limit headers are approximate and asynchronously updated.
> This means that there may be a minor delay in the decrementing of remaining
> requests. This could result in your application receiving an unexpected 429
> response if you don't track the total number of requests you make yourself.

**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-messages/).
---|---
Status Message | Description of the status code.
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.
**Response Codes**
200 | A successful request.
---|---
400 | The request had bad syntax or was inherently impossible to be satisfied.
401 | The request requires user authentication.
> **Note:** For a complete list of response codes, please refer to the
> [Troubleshooting Guide](/build/reference/web-api/troubleshooting-
> guide/error-messages/).

## Additional Information
The response if provided in the format requested using units in the unit
system which corresponds to the Accept-Language header provided.
A recent activity record contains the distance and duration values recorded
during the last time the activity was logged. The record retrieved can be used
to log the activity via the Log Activity endpoint with the same or adjusted
values for distance and duration.
### Distance, pace and speed
The Fitbit devices use the following formulas to calculate distance, pace and
speed. Please note, stride length is approximated by the person's height and
gender.
`distance = steps * stride length`
`pace = time(sec) / distance`
`speed = distance / time(hour)`
Daily activity summary and auto-detected exercises' (recorded using Smart
Track) distance are estimated values based on steps and stride length. Devices
that support on-device or connected GPS will record distance, pace and speed
from the GPS data when the exercise is initiated using the on-device Exercise
application. If the person begins moving before receiving a GPS signal, steps
and stride length are used to calculate distance until the GPS connects.
Intraday distance values, returned by the Intraday endpoints or Activity TCX
endpoint, can be more accurate since they use the GPS data.

【Context No.20】
# Get Heart Rate Intraday by Date
This endpoint retrieves the heart rate intraday time series data on a specific
date or 24 hour period. Intraday support can extend the detail-level response
to include 1sec, 1min, 5min or 15min for Heart Rate.
3rd-party developers who want access to retrieve other Fitbit users’ Intraday
data through the “Client” or “Server” application type should submit a request
by filling out this [form](/build/reference/web-api/intraday/). **_A Fitbit
developer’s personal Intraday data is automatically available through the
“Personal” application type. You do not need to submit a request._**
**Scope:** _heartrate_
* * *
## Request
GET |  /1/user/[user-id]/activities/heart/date/[date]/1d/[detail-level].json
/1/user/[user-id]/activities/heart/date/[date]/1d/[detail-level]/time/[start-
time]/[end-time].json
---|---
**URI Arguments**
user-id | required | The encoded ID of the user. Use "-" (dash) for current logged-in user.
---|---|---
date | required | The date in the format `yyyy-MM-dd` or `today`
detail-level | required | Number of data points to include
**Supported:** `1sec` | `1min` | `5min` | `15min`
start-time | optional | The start of the time period in the format `HH:mm`.
end-time | optional | The end of the time period in the format `HH:mm`.
**Query Parameters**
timezone | optional | Returns the response from the specified timezone.
**Supported:** `UTC` | string
---|---|---|---
**Request Headers** authorization | required | Specify the token type and Fitbit user’s access token.
**Token type:** `Bearer`
---|---|---
accept | optional | The media type of the response content the client is expecting.
**Supported:** `application/json`
accept-language | recommended | The measurement unit system to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
accept-locale | optional | The locale to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).

【Context No.21】
**Response Codes**
200 | A successful request.
---|---
400 | The request had bad syntax or was inherently impossible to be satisfied.
401 | The request requires user authentication.
> **Note:** For a complete list of response codes, please refer to the
> [Troubleshooting Guide](/build/reference/web-api/troubleshooting-
> guide/error-messages/).

## Additional Information
You can read more about data accuracy in the **Clinical Study** section of the
[Fitbit ECG App Instructions for
Use](https://support.google.com/fitbit/answer/14253977#samd).
Additional information about the Fitbit ECG app can be found in the help
article [What is the Fitbit ECG
app?](https://support.google.com/fitbit/answer/14236718).
### Limit / Offset
ECG data is very large because of the waveforms. Because of this, we cannot
query and return large numbers of ECG results, and limit the number of results
to 10. The offset query parameter is not fully supported and it's future is
unknown. Therefore, the only supported value is 0. Using the "offset" query
parameter in any other capacity could cause your application to break.
To paginate, request the next and previous links in the pagination response
object. The next and previous link should include afterDate or beforeDate
parameters of the datetime for the last reading in each page.
### Collecting ECG data
Before taking your first reading, review the Heart Rhythm Assessment. The
Heart Rhythm Assessment is found in the Fitbit mobile application.
Instructions can be found in the section "How do I use the Fitbit ECG app?"
within the help article [What is the Fitbit ECG
app?](https://support.google.com/fitbit/answer/14236718).
### Classification of ECG results
After the user takes a 30 second ECG reading or spot check, Fitbit classifies
the user's heart rhythm as one of the 5 results:
  * **Atrial fibrillation (AFib)** : Your heart rhythm shows signs of AFib, an irregular heart rhythm. AFib can have serious health effects. You should contact your doctor.
  * **Normal sinus rhythm (NSR)** : Your heart rhythm appears normal. It doesn’t show signs of AFib, an irregular heart rhythm.

【Context No.22】
# Create Activity Goal
Creates or updates a user's daily or weekly activity goal.
It uses [units](/build/reference/web-api/developer-guide/application-
design/#Unit-Systems) that correspond to the Accept-Language header provided.
**Scope:** _activity_
* * *
## Request
POST |  /1/user/[user-id]/activities/goals/[period].json
---|---
**URI Arguments**
user-id | required | The encoded ID of the user. Use "-" (dash) for current logged-in user.
---|---|---
period | required | **Supported:** `daily` | `weekly`
**Query Parameters**
type | optional/required | **Supported:** `activeMinutes` | `activeZoneMinutes` | `caloriesOut` | `distance` | `floors` | `steps` | string
---|---|---|---
value | optional/required | Goal value | integer
**Request Headers** authorization | required | Specify the token type and Fitbit user’s access token.
**Token type:** `Bearer`
---|---|---
accept | optional | The media type of the response content the client is expecting.
**Supported:** `application/json`
accept-language | recommended | The measurement unit system to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
accept-locale | optional | The locale to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
content-length | required | According to [RFC 7230, section 3.3.2](https://tools.ietf.org/html/rfc7230#section-3.3.2), this HTTP request requires the Content-Length header field containing the anticipated size of the payload body.

【Context No.23】
_Returned with Implicit Grant Flow._
**Authorization Code Grant Flow [with PKCE]** **Implicit Grant Flow**

**Response Headers**
content-type | The media type of the response content being sent to the client.
**Supported:** `application/json`
---|---
fitbit-rate-limit-limit | The quota number of calls.
fitbit-rate-limit-remaining | The number of calls remaining before hitting the rate limit.
fitbit-rate-limit-reset | The number of seconds until the rate limit resets.
> **Note:** The rate limit headers are approximate and asynchronously updated.
> This means that there may be a minor delay in the decrementing of remaining
> requests. This could result in your application receiving an unexpected 429
> response if you don't track the total number of requests you make yourself.

**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-messages/).
---|---
Status Message | Description of the status code.
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.

**Response Codes**
For a complete list of authorization errors, please refer to the
[Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-
messages/#authorization-errors).

## Additional Information
### Localizing the consent page
The Fitbit consent page supports localization. Since it is just a web form,
the text is translated based on the user's "Language by Region/Country"
setting in their Fitbit account. The user's device or browser language
settings may translate the consent language, as well. We do not support a
query parameter that forces language conversion.
[Client Credentials Grant Flow](/build/reference/web-api/authorization/client-
credentials/)
[![next](/images/next-4a798552f1301bc41839afd0a22e5e82.svg)](/build/reference/web-
api/authorization/client-credentials/)

【Context No.24】
> **Note:** The rate limit headers are approximate and asynchronously updated.
> This means that there may be a minor delay in the decrementing of remaining
> requests. This could result in your application receiving an unexpected 429
> response if you don't track the total number of requests you make yourself.

**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-messages/).
---|---
Status Message | Description of the status code.
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.
**Response Codes**
200 | A successful request.
---|---
400 | The request had bad syntax or was inherently impossible to be satisfied.
401 | The request requires user authentication.
> **Note:** For a complete list of response codes, please refer to the
> [Troubleshooting Guide](/build/reference/web-api/troubleshooting-
> guide/error-messages/).

## Additional Information
TCX returns GPS and heart rate data which are tied to the GPS data points. If
you only want heart rate, see [Heart Rate Intraday Time
Series](/build/reference/web-api/intraday/).
To retrieve the TCX data without GPS data, use the endpoint's query parameter
`includePartialTCX=true`. If the exercise does not contain GPS data, the
lowest heart rate granularity available is 1 minute.
#### Finding an activity's "log id"
The activity's log-id can be found 2 ways:
  * Programmatically, execute the [Get Activity Log List](/build/reference/web-api/activity/get-activity-log-list/) endpoint. Get the value of the `logId` element for each exercise returned.
  * Non-programmatically, find the list of activity logs in the Fitbit web application. Click on the "View Details" button next to each activity. The activity log ID will be displayed in the URL, e.g. 213560689 in https://[www.fitbit.com/activities/exercise/213560689](http://www.fitbit.com/activities/exercise/213560689).
### Distance, pace and speed
The Fitbit devices use the following formulas to calculate distance, pace and
speed.

【Context No.25】
**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-messages/).
---|---
Status Message | Description of the status code.
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.
**Response Codes**
200 | A successful request.
---|---
400 | The request had bad syntax or was inherently impossible to be satisfied.
401 | The request requires user authentication.
> **Note:** For a complete list of response codes, please refer to the
> [Troubleshooting Guide](/build/reference/web-api/troubleshooting-
> guide/error-messages/).

## Additional Information
The activity log entries for a given day are displayed in the format requested
using units in the unit system corresponding to the Accept-Language header
provided.
#### Privacy Setting
The Fitbit privacy setting Activities (“Friends Only” and “Public”) grants
access to a user's resource with the exception that the response DOES NOT
include a detailed list of activity log entries.
#### Considerations
  1. Daily summary data and daily goals for elevation (elevation, floors) only included for users with a device with an altimeter.
  2. The steps field in activity log entries included only for activities that have steps (e.g. "Walking", "Running"); distance only included when it is relevant.
  3. Calorie burn goal (caloriesOut) represents either dynamic daily target from the premium trainer plan or manual calorie burn goal. Goals are included in the response only for today and 21 days in the past.
### Retrieving heart rate data within the activity response
The Heart Rate Zones data array can be displayed within this endpoint's
response. For this to occur, the following are required. If any of the items
are missing, the data array will not be displayed.
  1. The _heartrate_ scope enabled by the user.
  2. A heart rate enabled device paired to the user's account.
  3. Heart rate data recorded by the device.
### Distance, pace and speed
The Fitbit devices use the following formulas to calculate distance, pace and
speed. Please note, stride length is approximated by the person's height and
gender.

【Context No.26】
# Get Favorite Activities
Retrieves a list of a user's favorite activities.
**Scope:** _activity_
* * *
## Request
GET |  /1/user/[user-id]/activities/favorite.json
---|---
**URI Arguments**
user-id | required | The encoded ID of the user. Use "-" (dash) for current logged-in user.
---|---|---
**Request Headers** authorization | required | Specify the token type and Fitbit user’s access token.
**Token type:** `Bearer`
---|---|---
accept | optional | The media type of the response content the client is expecting.
**Supported:** `application/json`
accept-language | recommended | The measurement unit system to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
accept-locale | optional | The locale to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
**Examples**
  * URL
  * CURL
GET https://api.fitbit.com/1/user/-/activities/favorite.json
GET https://api.fitbit.com/1/user/GGNJL9/activities/favorite.json
curl -X GET "https://api.fitbit.com/1/user/-/activities/favorite.json" \
-H "accept: application/json" \
-H "authorization: Bearer <access_token>"

* * *
## Response
  * Description
  * Example Response
Element Name | Description
---|---
activityId | The recorded activity’s identifier number. For example, the activityId for “Run” is 90009. For a complete list of exercise identifiers, see [Get All Activity Types](/build/reference/web-api/activity/get-all-activity-types/) endpoint.
description | Additional information about the recorded activity.
mets | The metabolic equivalent (METs) of the activity performed.
name | The name of the recorded activity.

**Response Headers**
content-type | The media type of the response content being sent to the client.
**Supported:** `application/json`
---|---
fitbit-rate-limit-limit | The quota number of calls.
fitbit-rate-limit-remaining | The number of calls remaining before hitting the rate limit.
fitbit-rate-limit-reset | The number of seconds until the rate limit resets.
> **Note:** The rate limit headers are approximate and asynchronously updated.

【Context No.27】
# Get Activity Goals
Retrieves a user's current daily or weekly activity goals.
It uses [units](/build/reference/web-api/developer-guide/application-
design/#Unit-Systems) that correspond to the Accept-Language header provided.
**Scope:** _activity_
* * *
## Request
GET |  /1/user/[user-id]/activities/goals/[period].json
---|---
**URI Arguments**
user-id | required | The encoded ID of the user. Use "-" (dash) for current logged-in user.
---|---|---
period | required | **Supported:** `daily`| `weekly`
**Request Headers** authorization | required | Specify the token type and Fitbit user’s access token.
**Token type:** `Bearer`
---|---|---
accept | optional | The media type of the response content the client is expecting.
**Supported:** `application/json`
accept-language | recommended | The measurement unit system to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
accept-locale | optional | The locale to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
**Examples**
  * URL
  * CURL
GET https://api.fitbit.com/1/user/-/activities/goals/daily.json
GET https://api.fitbit.com/1/user/GGNJL9/activities/goals/daily.json
curl -X GET "https://api.fitbit.com/1/user/-/activities/goals/daily.json" \
-H "accept: application/json" \
-H "authorization: Bearer <access_token>"

* * *
## Response
  * Description
  * Example Response
Element Name | Description
---|---
goals : activeMinutes | Daily active minutes goal. A value is not returned for weekly goals.
goals : activeZoneMinutes | Daily or weekly active zone minutes goal.
goals : caloriesOut | Daily calories burned goal. A value is not returned for weekly goals.
goals : distance | Daily or weekly distance goal.
goals : floors | Daily or weekly floors climbed goal.
goals : steps | Daily or weekly steps taken goal.
The following is an example of a response for daily activity goals.
The following is an example of a response for weekly activity goals.

**Response Headers**
content-type | The media type of the response content being sent to the client.

【Context No.28】
com%2Fcallback \
&code_verifier=<code_verifier_value>"
**Authorization Code Grant Flow with PKCE (App Type: Client)**
curl -X POST "https://api.fitbit.com/oauth2/token" \
-H "accept: application/json" \
-d "client_id=<client_id>&grant_type=authorization_code&code=<authorization_code> \
&redirect_uri=https%3A%2F%2Fexample.com%2Fcallback \
&code_verifier=<code_verifier_value>"

* * *
## Response
  * Description
  * Example Response
Element Name | Description
---|---
access_token | The updated active access token.
expires_in | The time the access token expires in seconds.
refresh_token | The updated active refresh token.
token_type | **Supported** : `Bearer`
user_id | The Fitbit user ID associated with the access token and refresh token
{
"access_token": "eyJhbGciOiJIUzI1...",
"expires_in": 28800,
"refresh_token": "c643a63c072f0f05478e9d18b991db80ef6061e...",
"token_type": "Bearer",
"user_id": "GGNJL9"
}

**Response Headers**
content-type | The media type of the response content being sent to the client.
**Supported:** `application/json`
---|---
fitbit-rate-limit-limit | The quota number of calls.
fitbit-rate-limit-remaining | The number of calls remaining before hitting the rate limit.
fitbit-rate-limit-reset | The number of seconds until the rate limit resets.
> **Note:** The rate limit headers are approximate and asynchronously updated.
> This means that there may be a minor delay in the decrementing of remaining
> requests. This could result in your application receiving an unexpected 429
> response if you don't track the total number of requests you make yourself.

**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/developer-guide/application-design/#Localization).
---|---
Status Message | Description of the status code.
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.
**Response Codes**
200 | A successful request.

【Context No.29】
# Create Weight Goal
Creates or updates a user's weight goal.
**Scope:** _weight_
* * *
## Request
POST |  /1/user/[user-id]/body/log/weight/goal.json
---|---
**URI Arguments**
user-id | required | The encoded ID of the user. Use "-" (dash) for current logged-in user.
---|---|---
**Query Parameters**
startDate | required | Weight goal start date in the format yyyy-MM-dd. | decimal
---|---|---|---
startWeight | required | Starting weight before reaching goal in the format X.XX; entered in the unit system corresponding to the Accept-Language header provided. | decimal
weight | optional/required | Target weight goal in the format X.XX; entered in the unit system corresponding to the Accept-Language header provided. Required if the user doesn't have an existing weight goal. | decimal
**Request Headers**
authorization | required | Specify the token type and Fitbit user’s access token.
**Token type:** `Bearer`
---|---|---
accept | optional | The media type of the response content the client is expecting.
**Supported:** `application/json`
accept-language | recommended | The measurement unit system to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
accept-locale | optional | The locale to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
content-length | required | According to [RFC 7230, section 3.3.2](https://tools.ietf.org/html/rfc7230#section-3.3.2), this HTTP request requires the Content-Length header field containing the anticipated size of the payload body.

【Context No.30】
**Token type:** `Basic`
---|---|---
accept | optional | The media type of the response content the client is expecting.
**Supported:** `application/json`
accept-locale | optional | The locale to use for response values. See [Localization](/build/reference/web-api/basics/#localization).
**Examples**
  * URL
  * CURL
**Authorization Code Grant Flow**
POST https://api.fitbit.com/oauth2/token
Authorization: Basic <basic_token>
Content-Type: application/x-www-form-urlencoded
grant_type=authorization_code&code=<authorization_code>
&redirect_uri=https%3A%2F%2Fexample.com%2Fcallback
**Authorization Code Grant Flow with PKCE**
POST https://api.fitbit.com/oauth2/token
Authorization: Basic <basic_token>
Content-Type: application/x-www-form-urlencoded
grant_type=authorization_code&code=<authorization_code>
&redirect_uri=https%3A%2F%2Fexample.com%2Fcallback
&code_verifier=<code_verifier_value>
**Authorization Code Grant Flow with PKCE (App Type: Client)**
POST https://api.fitbit.com/oauth2/token
Content-Type: application/x-www-form-urlencoded
client_id=<client_id>&grant_type=authorization_code&code=<authorization_code>
&redirect_uri=https%3A%2F%2Fexample.com%2Fcallback
&code_verifier=<code_verifier_value>
**Authorization Code Grant Flow**
curl -X POST "https://api.fitbit.com/oauth2/token" \
-H "accept: application/json" \
-H "authorization: Basic <basic_token>" \
-d "grant_type=authorization_code&code=<authorization_code> \
&redirect_uri=https%3A%2F%2Fexample.com%2Fcallback"
**Authorization Code Grant Flow with PKCE**
curl -X POST "https://api.fitbit.com/oauth2/token" \
-H "accept: application/json" \
-H "authorization: Basic <basic_token>" \
-d "grant_type=authorization_code&code=<authorization_code> \
&redirect_uri=https%3A%2F%2Fexample.com%2Fcallback \
&code_verifier=<code_verifier_value>"
**Authorization Code Grant Flow with PKCE (App Type: Client)**
curl -X POST "https://api.fitbit.

【Context No.31】
Developers who need to display the most accurate distance values, we suggest
using only the intraday distance data points instead of the activity summary.
See [ How does my Fitbit device calcuate my daily
activity?](https://support.google.com/fitbit/answer/14237111) for more
information.
### Webhook notifications
The Fitbit Web API can send notifications when a Fitbit user has new data to
download. This is possible by implementing the Subscription API and
subscribing to one or more data collections. See [ Using
Subscriptions](/build/reference/web-api/developer-guide/using-subscriptions/).
Whenever the activity service recognizes a change to the user’s data, a
notification is sent to your application’s subscriber.
The activity collection recognizes changes to a user’s recorded activities,
step count, calories burned, distance traveled, etc. Keep in mind that even
when a person is not in motion, their body is burning calories. It’s possible
to receive activity notifications representing calorie burn even when the user
is sleeping or stationary. Today, you cannot subscribe to a subset of the
user’s activity data. So, it is the responsibility of your application to
query the necessary activity endpoint(s) to reconcile the data in your system.
[![previous](/images/next-4a798552f1301bc41839afd0a22e5e82.svg)](/build/reference/web-
api/intraday/get-activity-intraday-by-date/)
[Get Activity Intraday by Date](/build/reference/web-api/intraday/get-
activity-intraday-by-date/)
[Get Breathing Rate Intraday by Date](/build/reference/web-api/intraday/get-
br-intraday-by-date/)
[![next](/images/next-4a798552f1301bc41839afd0a22e5e82.svg)](/build/reference/web-
api/intraday/get-br-intraday-by-date/)

【Context No.32】
### Activity Types
Any activity log entry is based on one of the activities from the catalog of
activities. Though activities in catalog have a tree structure (i.e. divided
into categories like "Sports and Workouts", "Running" and subcategories like
"Bicycling", "Walking"), each activity leaf in the catalog can also have more
granular structure. Each leaf can have a directory activity type (and have
child intensity levels) or simple activity (have no levels). When creating a
new activity log entry, use the following types of objects to pass as the
activityId value:
  * **Directory activity id** : activity contains child activities which represents intensity levels (e.g. "Running").
  * **Intensity level id** : activity within directory activity (e.g. "Running/6.7mph (9 min/mile)").
  * **Simple activity id** : single activity without intensity levels (e.g. "Shoveling snow").
> **Note:** A list of activities can be retrieved via the Browse Activities
> endpoint.

### Custom Activities
In the process of creating a new activity log entry, it is possible to
seamlessly create a new custom activity for the user. This can be achieved by
using the second scenario for the set of POST parameters (providing
activityName instead of activityId). In this case, either existing custom
activity with the same name will be used for creating new log entry or a new
record created and then logged. As for custom activities on the website,
manualCalories must always provided with the activityName parameter among
other required fields.
> **Note:** "Steps" may be used as a distanceUnits value when the activity is
> either "Walking" (activityId=90013) or "Running" (activityId=90009) and
> distance is only included when it is relevant.
### Webhook notifications
The Fitbit Web API can send notifications when a Fitbit user has new data to
download. This is possible by implementing the Subscription API and
subscribing to one or more data collections. See [ Using
Subscriptions](/build/reference/web-api/developer-guide/using-subscriptions/).
Whenever the activity service recognizes a change to the user’s data, a
notification is sent to your application’s subscriber.

【Context No.33】
activities-<resource>-intraday : dataset : level | Numerical value representing the user's activity-level at the moment when the resource was recorded.
0 = sedentary
1 = lightly active
2 = fairly/moderately active
3 = very active
Returned only when resource = calories.
activities-<resource>-intraday : dataset : mets  | METs value at the moment when the resource was recorded.
Returned only when resource = calories.
activities-<resource>-intraday : dataset : time | The time of the recorded resource.
activities-<resource>-intraday : dataset : value | The specified resource's value at the time it is recorded.

**Response Headers**
content-type | The media type of the response content being sent to the client.
**Supported:** `application/json`
---|---
fitbit-rate-limit-limit | The quota number of calls.
fitbit-rate-limit-remaining | The number of calls remaining before hitting the rate limit.
fitbit-rate-limit-reset | The number of seconds until the rate limit resets.
> **Note:** The rate limit headers are approximate and asynchronously updated.
> This means that there may be a minor delay in the decrementing of remaining
> requests. This could result in your application receiving an unexpected 429
> response if you don't track the total number of requests you make yourself.

**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-messages/).
---|---
Status Message | Description of the status code.
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.
**Response Codes**
200 | A successful request.
---|---
400 | The request had bad syntax or was inherently impossible to be satisfied.
401 | The request requires user authentication.
> **Note:** For a complete list of response codes, please refer to the
> [Troubleshooting Guide](/build/reference/web-api/troubleshooting-
> guide/error-messages/).

## Additional Information
Access to the Intraday Time Series for personal use (accessing your own data)
is available through the "Personal" App Type.
**Restriction** : Activity Intraday data cannot be retrieved for more than a
24 hour period.

【Context No.34】
activities : calories | Number of calories burned during the exercise.
activities : caloriesLink | Web API endpoint to call to get the specific calories burned for the named exercise.
activities : detailsLink | An endpoint that provides additional details about the user's activity either manually logged on the mobile application or API, or auto-recognized by the Fitbit device. Activities recorded using the device's exercise app are not supported.
activities : distance | Distance traveled during the exercise.
activities : distanceUnit | Distance units defined by the Accept-Language header.
activities : duration | The length in time (milliseconds) after the exercise was edited. If the exercise was not edited, the duration = originalDuration. This value will contain pauses during the exercise.
activities : elevationGain | Elevation gained during the exercise.
activities : hasActiveZoneMinutes | The _Heart Rate_ scope is required to see this value.
**Supported** : `true` | `false`
activities : heartRateLink | The _Heart Rate_ scope is required to see this value.
activities : heartRateZones : caloriesOut | The _Heart Rate_ scope is required to see this value.
activities : heartRateZones : max | The _Heart Rate_ scope is required to see this value.
activities : heartRateZones : min | The _Heart Rate_ scope is required to see this value.
activities : heartRateZones : minutes | The _Heart Rate_ scope is required to see this value.
activities : heartRateZones : name | The _Heart Rate_ scope is required to see this value. **Supported** : `Cardio` | `Fat Burn` | `Out of Range` | `Peak`
activities : lastModified | The timestamp the exercise was last modified.
activities : logId | The activity log identifier for the exercise.
activities : logType | The type of activity log created.
**Supported** : `auto_detected` | `manual` | `mobile_run` | `tracker` | the name of the 3rd party application
activities : manualValuesSpecified : calories | A boolean value stating if calories was provided when recording the exercise.
activities : manualValuesSpecified : distance | A boolean value stating if distance was provided when recording the exercise.
activities : manualValuesSpecified : steps | A boolean value stating if steps was provided when recording the exercise.
activities : originalDuration | The initial length in time (milliseconds) that the exercise was recorded. This value will contain pauses during the exercise.

【Context No.35】
fitbit-rate-limit-remaining | The number of calls remaining before hitting the rate limit.
fitbit-rate-limit-reset | The number of seconds until the rate limit resets.
> **Note:** The rate limit headers are approximate and asynchronously updated.
> This means that there may be a minor delay in the decrementing of remaining
> requests. This could result in your application receiving an unexpected 429
> response if you don't track the total number of requests you make yourself.

**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-messages/)
---|---
Status Message | Description of the status code
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure
**Response Codes**
200 | A successful request
---|---
400 | The request had bad syntax or was inherently impossible to be satisfied
401 | The request requires user authentication
> **Note:** For a complete list of response codes, please refer to the
> [Troubleshooting Guide](/build/reference/web-api/troubleshooting-
> guide/error-messages/)

## Additional Information
Access to the Intraday Time Series for personal use (accessing your own data)
is available through the "Personal" App Type.
**Restriction** : Heart Rate Intraday data cannot be retrieved for more than a
24 hour period. Any requests that expand over a 24 hour period will result
with the summary data for the date range specified.
The heart rate intraday time series data is returned in the format requested.
The endpoint mimics the Get Heart Rate Time Series endpoints. If your
application has the appropriate access, your calls to a time series endpoint
for a specific day (by using start and end dates on the same day or a period
of 24 hours), the response will include extended intraday values with
1-second, 1-minute, 5-minute or 15-minute detail level for that day. Unlike
other time series calls that allow fetching data of other users, intraday data
is available only for and to the authorized user.
The "1sec" detail-level may not always return data in 1 second sampling
outside of a recorded exercise. Sampling is more granular during exercise to
provide accuracy.

【Context No.36】
# Get Frequent Activities
Retrieves a list of a user's frequent activities.
**Scope:** _activity_
* * *
## Request
GET |  /1/user/[user-id]/activities/frequent.json
---|---
**URI Arguments**
user-id | required | The encoded ID of the user. Use "-" (dash) for current logged-in user.
---|---|---
**Request Headers** authorization | required | Specify the token type and Fitbit user’s access token.
**Token type:** `Bearer`
---|---|---
accept | optional | The media type of the response content the client is expecting.
**Supported:** `application/json`
accept-language | recommended | The measurement unit system to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
accept-locale | optional | The locale to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
**Examples**
  * URL
  * CURL
GET https://api.fitbit.com/1/user/-/activities/frequent.json
GET https://api.fitbit.com/1/user/GGNJL9/activities/frequent.json
curl -X GET "https://api.fitbit.com/1/user/[user-id]/activities/frequent.json"
\
-H "accept: application/json" \
-H "authorization: Bearer <access_token>"

* * *
## Response
  * Description
  * Example Response
Element Name | Description
---|---
activityId | The recorded activity’s identifier number. For example, the activityId for “Run” is 90009. For a complete list of exercise identifiers, see [Get All Activity Types](/build/reference/web-api/activity/get-all-activity-types/) endpoint.
calories | The number of calories burned associated with the activity.
description | Additional information about the recorded activity.
distance | Distance traveled associated with the recorded activity.
duration | The length in time (milliseconds) after the exercise was edited. This value will contain pauses during the exercise.
name | The name of the recorded activity.

**Response Headers**
content-type | The media type of the response content being sent to the client.
**Supported:** `application/json`
---|---
fitbit-rate-limit-limit | The quota number of calls.
fitbit-rate-limit-remaining | The number of calls remaining before hitting the rate limit.

【Context No.37】
> **Note:** The rate limit headers are approximate and asynchronously updated.
> This means that there may be a minor delay in the decrementing of remaining
> requests. This could result in your application receiving an unexpected 429
> response if you don't track the total number of requests you make yourself.

**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-messages/).
---|---
Status Message | Description of the status code.
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.
**Response Codes**
200 | A successful request.
---|---
400 | The request had bad syntax or was inherently impossible to be satisfied.
401 | The request requires user authentication.
> **Note:** For a complete list of response codes, please refer to the
> [Troubleshooting Guide](/build/reference/web-api/troubleshooting-
> guide/error-messages/).

## Additional Information
The data is returned in the format requested using units in the unit system
which corresponds to the Accept-Language header provided.
Activity statistics includes Lifetime and Best achievement values from the My
Achievements tile on the website dashboard. Response contains both statistics
from the tracker device and total numbers including tracker data and manual
activity log entries as seen on the Fitbit website dashboard.
The Fitbit user's `My Achievements (Friends or Anyone)` privacy permission
grants access to user's resource.
### Distance, pace and speed
The Fitbit devices use the following formulas to calculate distance, pace and
speed. Please note, stride length is approximated by the person's height and
gender.
`distance = steps * stride length`
`pace = time(sec) / distance`
`speed = distance / time(hour)`
Daily activity summary and auto-detected exercises' (recorded using Smart
Track) distance are estimated values based on steps and stride length. Devices
that support on-device or connected GPS will record distance, pace and speed
from the GPS data when the exercise is initiated using the on-device Exercise
application. If the person begins moving before receiving a GPS signal, steps
and stride length are used to calculate distance until the GPS connects.

【Context No.38】
# Create Activity Log
Creates a log entry containing the Fitbit user's activity or private custom
activity.
**Scope:** _activity_
* * *
## Request
POST |  /1/user/[user-id]/activities.json
---|---
**URI Arguments**
user-id | required | The encoded ID of the user. Use "-" (dash) for current logged-in user.
---|---|---
**Query Parameters**
activityId | optional/required | This is the activity ID of the activity, directory activity or intensity level activity. If you pass directory activity id, Fitbit calculates and substitutes it with the corresponding intensity level activity ID based on the specified distance and/or duration. Either activityId or activityName must be provided. | integer
---|---|---|---
activityName | optional/required | Custom activity name. Either activityId or activityName must be provided. | string
manualCalories | optional/required | Calories burned, specified manually. Request with activityName parameter, otherwise optional | integer
startTime | required | Activity start time. Hours and minutes in the format HH:mm. | string ($time)
durationMillis | required | Duration in milliseconds. | integer
date | required | Log entry date in the format yyyy-MM-dd. | string ($date)
distance | optional/required | Distance; required for logging directory activity. In the format X.XX and in the selected distanceUnit or in the unit system that corresponds to the Accept-Language header provided. | decimal
distanceUnit | optional | Distance measurement unit. See [Units](/build/reference/web-api/developer-guide/application-design/#Units) for acceptable values. "Steps" may be used as a distanceUnits value when the activity is either "Walking" (activityId=90013) or "Running" (activityId=90009). | string
**Request Headers** authorization | required | Specify the token type and Fitbit user’s access token.
**Token type:** `Bearer`
---|---|---
accept | optional | The media type of the response content the client is expecting.
**Supported:** `application/json`
accept-language | recommended | The measurement unit system to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
accept-locale | optional | The locale to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).

【Context No.39】
Activities recorded using the device's exercise app are not supported.
activities : distance | Distance traveled during the on-device recorded exercise.
activities : duration | The activeDuration (milliseconds) + any pauses that occurred during the activity recording.
activities : hasActiveZoneMinutes | **Supported** : `true` | `false`
activities : hasStartTime | **Supported** : `true` | `false`
activities : isFavorite | **Supported** : `true` | `false`
activities : lastModified | Timestamp the exercise was last modified.
activities : logId | The activity log identifier for the exercise.
activities : name | Name of the recorded exercise.
activities : startDate | The start date of the recorded exercise.
activities : startTime | The start time of the recorded exercise.
activities : steps | Number of steps recorded during the exercise.
goals : activeMinutes | User defined goal for daily active minutes.
goals : caloriesOut | User defined goal for daily calories burned.
goals : distance | User defined goal for daily distance traveled.
goals : floors | User defined goal for daily floor count.
goals : steps | User defined goal for daily step count.
summary : activeScore | Functionality removed. A response is returned for backward compatibility.
**Supported:** `-1`
summary : activityCalories | The number of calories burned for the day during periods the user was active above sedentary level. This includes both activity burned calories and BMR.
summary : caloriesEstimationMu | Total estimated calories burned for the day based on measurement uncertainty.
summary : caloriesBMR | Total BMR calories burned for the day.
summary : caloriesOut | Total calories burned for the day (daily timeseries total).
summary : caloriesOutUnestimated | Total unestimated calories burned for the day.
summary : distances : activity | **Supported** : `<activity name>` | `total` | `tracker` | `loggedActivities` | `veryActive` | `moderatelyActive` | `lightlyActive` | `sedentaryActive`
summary : distances : distance | For the specified resource, the distance traveled for the day displayed in the units defined by the Accept-Language header.
summary : elevation | The elevation traveled for the day displayed in the units defined by the Accept-Language header.
summary : fairlyActiveMinutes | Total minutes the user was fairly/moderately active.
summary : floors | The equivalent floors climbed for the day displayed in the units defined by the Accept-Language header.

【Context No.40】
**Supported:** `application/json`
---|---
fitbit-rate-limit-limit | The quota number of calls.
fitbit-rate-limit-remaining | The number of calls remaining before hitting the rate limit.
fitbit-rate-limit-reset | The number of seconds until the rate limit resets.
> **Note:** The rate limit headers are approximate and asynchronously updated.
> This means that there may be a minor delay in the decrementing of remaining
> requests. This could result in your application receiving an unexpected 429
> response if you don't track the total number of requests you make yourself.

**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-messages/).
---|---
Status Message | Description of the status code.
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.
**Response Codes**
200 | A successful request.
---|---
400 | The request had bad syntax or was inherently impossible to be satisfied.
401 | The request requires user authentication.
> **Note:** For a complete list of response codes, please refer to the
> [Troubleshooting Guide](/build/reference/web-api/troubleshooting-
> guide/error-messages/).

## Additional Information
The response if provided in the format requested using units in the unit
system which corresponds to the Accept-Language header provided.
A frequent activity record contains the distance and duration values recorded
during the last time the activity was logged. The record retrieved can be used
to log the activity via the Log Activity endpoint with the same or adjusted
values for distance and duration.
[![previous](/images/next-4a798552f1301bc41839afd0a22e5e82.svg)](/build/reference/web-
api/activity/get-favorite-activities/)
[Get Favorite Activities](/build/reference/web-api/activity/get-favorite-
activities/)
[Get Lifetime Stats](/build/reference/web-api/activity/get-lifetime-stats/)
[![next](/images/next-4a798552f1301bc41839afd0a22e5e82.svg)](/build/reference/web-
api/activity/get-lifetime-stats/)

【Context No.41】
# Get Heart Rate Intraday by Interval
This endpoint retrieves the heart rate intraday time series data on a specific
date range for a 24 hour period. Intraday support can extend the detail-level
response to include 1sec, 1min, 5min or 15min for Heart Rate.
3rd-party developers who want access to retrieve other Fitbit users’ Intraday
data through the “Client” or “Server” application type should submit a request
by filling out this [form](/build/reference/web-api/intraday/). **_A Fitbit
developer’s personal Intraday data is automatically available through the
“Personal” application type. You do not need to submit a request._**
**Scope:** _heartrate_
* * *
## Request
GET |  /1/user/[user-id]/activities/heart/date/[start-date]/[end-date]/[detail-level].json
/1/user/[user-id]/activities/heart/date/[start-date][end-date]/[detail-
level]/time/[start-time]/[end-time].json
---|---
**URI Arguments**
user-id | required | The encoded ID of the user. Use "-" (dash) for current logged-in user.
---|---|---
start-date | required | The date in the format `yyyy-MM-dd` or `today`
end-date | required | The date in the format `yyyy-MM-dd` or `today`.
**Maximum range:** `24 hours`
detail-level | required | Number of data points to include
**Supported:** `1sec` | `1min` | `5min` | `15min`
start-time | optional | The start of the time period in the format `HH:mm`.
end-time | optional | The end of the time period in the format `HH:mm`.
**Query Parameters**
timezone | optional | Returns the response from the specified timezone.
**Supported:** `UTC` | string
---|---|---|---
**Request Headers** authorization | required | Specify the token type and Fitbit user’s access token.
**Token type:** `Bearer`
---|---|---
accept | optional | The media type of the response content the client is expecting.
**Supported:** `application/json`
accept-language | recommended | The measurement unit system to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).

【Context No.42】
This could result in your application receiving an unexpected 429
> response if you don't track the total number of requests you make yourself.

**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-messages/).
---|---
Status Message | Description of the status code.
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.
**Response Codes**
200 | A successful request.
---|---
400 | The request had bad syntax or was inherently impossible to be satisfied.
401 | The request requires user authentication.
403 | The user's privacy settings prevent you from seeing their friends.
> **Note:** For a complete list of response codes, please refer to the
> [Troubleshooting Guide](/build/reference/web-api/troubleshooting-
> guide/error-messages/).
>

* * *
## Additional Information
The Fitbit privacy setting **My Friends** (Private, Friends Only or Public)
determines the access to a user's list of friends.
### Inviting friends
Fitbit does not offer endpoints that can send or respond to friend invitation
requests. The Fitbit user must send friend requests through the mobile
application or Fitbit.com. See [How do I connect with friends on
Fitbit?](https://support.google.com/fitbit/answer/14237026)
[Get Friends Leaderboard](/build/reference/web-api/friends/get-friends-
leaderboard/)
[![next](/images/next-4a798552f1301bc41839afd0a22e5e82.svg)](/build/reference/web-
api/friends/get-friends-leaderboard/)

【Context No.43】
3. If a specific time interval was passed to the call via **start-time/end-time** parameters, **data-value** will include a summary only for the requested time period (versus whole day).
  4. For the **activities/log/calories** resource, each data point also includes the **level** field that reflects calculated activity level for that time period **( 0 - sedentary; 1 - lightly active; 2 - fairly active; 3 - very active)**.
  5. If BMR or EER have been used to estimate calories for the whole specific day (no tracker data), intraday data for calories would be flat and estimated according to the simple equation **calories_1m = BMR(EER)/24/60.**
#### Using BMR/EER Algorithms
If a user had no Fitbit tracker data for the specific day then the greater of
Logged Activities + BMR (for minutes when there is no activity) and the
calories calculated from the EER for that day (if EER enabled for this user's
profile) are taken. In case, there was some data from the tracker for the
specific day, that data where available is used and for time where data is
unavailable, the BMR is used. If the total is less than 20% greater than BMR
then the EER (cals < EER * 0.8) is used. EER never used to calculate calories
for today.
#### Using BMR Formula
Fitbit uses the standard MD Mifflin-St Jeor equation:
#### EER Formula (TEE total energy expenditure)
The EER Formula is based on
<http://www.cdc.gov/pcd/issues/2006/oct/pdf/06_0034.pdf>, which in turn is
based on "Food and Nutrition Board. Dietary reference intakes for energy,
carbohydrate, fiber, fat, fatty acids, cholesterol, protein, and amino acids
(macronutrients). Washington (DC): National Academy Press; 2005."

【Context No.44】
# Get Activity Intraday by Date
This endpoint retrieves the activity intraday time series data for a given
resource on a specific date or 24 hour period. Intraday support can extend the
detail-level response to include 1min, 5min and 15min for Activity.
3rd-party developers who want access to retrieve other Fitbit users’ Intraday
data through the “Client” or “Server” application type should submit a request
by filling out this [form](/build/reference/web-api/intraday/). **_A Fitbit
developer’s personal Intraday data is automatically available through the
“Personal” application type. You do not need to submit a request._**
**Scope:** _activity_
* * *
## Request
GET |  /1/user/[user-id]/activities/[resource]/date/[date]/1d/[detail-level].json
/1/user/[user-id]/activities/[resource]/date/[date]/1d/[detail-
level]/time/[start-time]/[end-time].json
---|---
**URI Arguments**
user-id | required | The encoded ID of the user. Use "-" (dash) for current logged-in user.
---|---|---
resource | required | The resource of the data to be returned.
**Supported:** `calories` | `distance` | `elevation` | `floors` | `steps` | `swimming-strokes`
date | required | The date in the format `yyyy-MM-dd` or `today`.
detail-level | required | Number of data points to include.
**Supported:** `1min` | `5min` | `15min`
start-time | optional | The start of the time period in the format `HH:mm`.
end-time | optional | The end of the time period in the format `HH:mm`.
**Query Parameters**
timezone | optional | Returns the response from the specified timezone.
**Supported:** `UTC` | string
---|---|---|---
**Request Headers** authorization | required | Specify the token type and Fitbit user’s access token.
**Token type:** `Bearer`
---|---|---
accept | optional | The media type of the response content the client is expecting.
**Supported:** `application/json`
accept-language | recommended | The measurement unit system to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).

【Context No.45】
You should specify either locale or both - localeLang and localeCountry (locale is higher priority). | string
localeLang | optional | Language; in the format `xx`. You should specify either locale or both - localeLang and localeCountry (locale is higher priority). | string
startDayOfWeek | optional | Start day of the week; what day the week should start on. Either Sunday or Monday. | string
state | optional | Value of "State" field in user's profile; two-character code. Valid only if country is set to US. _Location_ scope is required to update this value. | string
strideLengthRunning | optional | Walking stride length in the format `X.XX`. Displayed in the unit system that corresponds to the Accept-Language header provided. | string ($decimal)
strideLengthWalking | optional | Walking stride length in the format `X.XX`. Displayed in the unit system that corresponds to the Accept-Language header provided. | string ($decimal)
timezone | optional | Timezone; in the format "America/Los_Angeles". | string
waterUnit | optional | Default water unit on website (doesn't affect API); one of (en_US, "any" for METRIC). _Nutrition_ scope is required to update this value. | string
weightUnit | optional | Default weight unit on website (doesn't affect API); one of (en_US, en_GB, "any" for METRIC). | string
**Request Headers**
authorization | required | Specify the token type and Fitbit user’s access token.
**Token type:** `Bearer`
---|---|---
accept | optional | Defines the media type of the response content the client is expecting.
**Supported:** `application/json`
accept-language | recommended | The measurement unit system to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
accept-locale | optional | The locale to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
content-length | required | According to [RFC 7230, section 3.3.2](https://tools.ietf.org/html/rfc7230#section-3.3.2), this HTTP request requires the Content-Length header field containing the anticipated size of the payload body.

【Context No.46】
# Get Activity Type
Retrieves the details for a single activity from the Fitbit activities
database in the format requested. If available, activity level details will
display.
**Scope:** _activity_
* * *
## Request
GET |  /1/activities/[activity-id].json
---|---
**URI Arguments**
user-id | required | The encoded ID of the user. Use "-" (dash) for current logged-in user.  | string
---|---|---|---
**Request Headers**
authorization | required | Specify the token type and Fitbit user’s access token.
**Token type:** `Bearer`
---|---|---
accept | optional | The media type of the response content the client is expecting.
**Supported:** `application/json`
accept-language | recommended | The measurement unit system to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
accept-locale | optional | The locale to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
**Examples**
  * URL
  * CURL
GET https://api.fitbit.com/1/activities/1010.json
curl -X GET https://api.fitbit.com/1/activities/1010.json" \
-H "accept: application/json" \
-H "authorization: Bearer <access_token>"

* * *
## Response
  * Description
  * Example Response
Element Name | Description
---|---
activity : accessLevel | **Supported** : `PUBLIC` | `PRIVATE`
activity : activityLevels : id | Numerical value representing the corresponding activity level.
activity : activityLevels : maxSpeedMPH | Maximum speed in MPH. Value: -1 means not applicable.
activity : activityLevels : mets | METs score for the activity id.
activity : activityLevels : minSpeedMPH | Minimum speed in MPH. Value: -1 means not applicable.
activity : activityLevels : name | Name of the activity level.
activity : hasSpeed | **Supported** : `true` | `false`
activity : id | Numerical value representing the corresponding activity.
activity : name | The name of the activity or exercise.

**Response Headers**
content-type | The media type of the response content being sent to the client.
**Supported:** `application/json`
---|---
fitbit-rate-limit-limit | The quota number of calls.

【Context No.47】
This is done to provide a better user
experience for the consumer. When the user drills down into the exercise
details, like data charts or maps, they should see the more accurate data
coming from the GPS or Intraday data.
Developers who need to display the most accurate distance values, we suggest
using only the intraday distance data points instead of the activity summary.
See [ How does my Fitbit device calcuate my daily
activity?](https://support.google.com/fitbit/answer/14237111) for more
information.
### Webhook notifications
The Fitbit Web API can send notifications when a Fitbit user has new data to
download. This is possible by implementing the Subscription API and
subscribing to one or more data collections. See [ Using
Subscriptions](/build/reference/web-api/developer-guide/using-subscriptions/).
Whenever the activity service recognizes a change to the user’s data, a
notification is sent to your application’s subscriber.
The activity collection recognizes changes to a user’s recorded activities,
step count, calories burned, distance traveled, etc. Keep in mind that even
when a person is not in motion, their body is burning calories. It’s possible
to receive activity notifications representing calorie burn even when the user
is sleeping or stationary. Today, you cannot subscribe to a subset of the
user’s activity data. So, it is the responsibility of your application to
query the necessary activity endpoint(s) to reconcile the data in your system.
[![previous](/images/next-4a798552f1301bc41839afd0a22e5e82.svg)](/build/reference/web-
api/activity-timeseries/get-activity-timeseries-by-date/)
[Get Activity Time Series by Date](/build/reference/web-api/activity-
timeseries/get-activity-timeseries-by-date/)

【Context No.48】
**Examples**
  * URL
  * CURL
POST
https://api.fitbit.com/1/user/-/activities/goals/daily.json?type=steps&value=10000
POST
https://api.fitbit.com/1/user/GGNJL9/activities/goals/daily.json?type=steps&value=10000
curl -X POST
"https://api.fitbit.com/1/user/-/activities/goals/daily.json?type=steps&value=10000"
\
-H "accept: application/json" \
-H "authorization: Bearer <access_token>" \
-H "content-length: <message_body_size>"

* * *
## Response
  * Description
  * Example Response
Element Name | Description
---|---
goals : activeMinutes | Daily active minutes goal. A value is not returned for weekly goals.
goals : activeZoneMinutes | Daily or weekly active zone minutes goal.
goals : caloriesOut | Daily calories burned goal. A value is not returned for weekly goals.
goals : distance | Daily or weekly distance goal.
goals : floors | Daily or weekly floors climbed goal.
goals : steps | Daily or weekly steps taken goal.
The following is an example of a response for daily activity goals.
The following is an example of a response for weekly activity goals.

**Response Headers**
content-type | The media type of the response content being sent to the client.
**Supported:** `application/json`
---|---
fitbit-rate-limit-limit | The quota number of calls.
fitbit-rate-limit-remaining | The number of calls remaining before hitting the rate limit.
fitbit-rate-limit-reset | The number of seconds until the rate limit resets.
> **Note:** The rate limit headers are approximate and asynchronously updated.
> This means that there may be a minor delay in the decrementing of remaining
> requests. This could result in your application receiving an unexpected 429
> response if you don't track the total number of requests you make yourself.

**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-messages/).
---|---
Status Message | Description of the status code.
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.
**Response Codes**
201 | A successful request.

【Context No.49】
# Get Heart Rate Time Series by Date
Retrieves the heart rate time series data over a period of time by specifying
a date and time period. The response will include only the daily summary
values.
**Scope:** _heartrate_
* * *
## Request
GET |  /1/user/[user-id]/activities/heart/date/[date]/[period].json
---|---
**URI Arguments**
user-id | required | The encoded ID of the user. Use "-" (dash) for current logged-in user.
---|---|---
date | required | The date in the format `yyyy-MM-dd` or `today`.
period | required | Number of data points to include.
**Supported:** `1d` | `7d` | `30d` | `1w` | `1m`
**Query Parameters**
timezone | optional | Returns the response from the specified timezone.
**Supported:** `UTC` | string
---|---|---|---
**Request Headers** authorization | required | Specify the token type and Fitbit user’s access token.
**Token type:** `Bearer`
---|---|---
accept | optional | The media type of the response content the client is expecting.
**Supported:** `application/json`
accept-language | recommended | The measurement unit system to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
accept-locale | optional | The locale to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
**Examples**
  * URL
  * CURL
GET https://api.fitbit.com/1/user/-/activities/heart/date/today/1d.json
GET https://api.fitbit.com/1/user/GGNJL9/activities/heart/date/today/1d.json
curl -X GET
"https://api.fitbit.com/1/user/-/activities/heart/date/today/1d.json" \
-H "accept: application/json" \
-H "authorization: Bearer <access_token>"

* * *
## Response
  * Description
  * Example Response
Element Name | Description
---|---
activities-heart : datetime | Date of the heart rate log.
activities-heart : value : customHeartRateZone : caloriesOut | Number calories burned with the custom heart rate zone.
activities-heart : value : customHeartRateZone : max | Maximum range for the custom heart rate zone.

【Context No.50】
# Get Subscription List
Retrieves a list of subscriptions created by your application for a specific
user. You can either fetch subscriptions for a specific collection or the
entire list of subscriptions for the user. For best practice, make sure that
your application maintains this list on your side and uses this endpoint only
to periodically ensure data consistency. See [Getting a List of
Subscriptions](/build/reference/web-api/developer-guide/using-
subscriptions/#Getting-a-List-of-Subscriptions) for more information.
**Scope:** _See`collection-path` URI Argument_
* * *
## Request
GET |  /1/user/[user-id]/[collection-path]/apiSubscriptions.json
---|---
**URI Arguments**
user-id | required | The encoded ID of the user. Use "-" (dash) for current logged-in user.
---|---|---
collection-path | optional | Collection of data to retrieve notifications. If not provided, a subscription will be deleted for all collections.
**Supported** : `activities` | `body` | `foods` | `sleep` | `userRevokedAccess`
The user must consent to the proper OAuth 2.0 scope before a subscription can
be created for the collection. The list of requirements are:

  * `activities` collection requires `activity` scope.
  * `body` collection requires `weight` scope.
  * `foods` collection requires `nutrition` scope.
  * `sleep` collection requires `sleep` scope.
  * `userRevokedAccess` collection does not require any scopes.
  * If no collection specified, `activity`, `nutrition`, `profile`, `settings`, `sleep`, `weight` scopes are required.

**Request Headers** authorization | required | Specify the token type and Fitbit user’s access token.
**Token type:** `Bearer`
---|---|---
accept | optional | The media type of the response content the client is expecting.
**Supported:** `application/json`
accept-locale | optional | The locale to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
X-Fitbit-Subscriber-Id | optional | The ID of the subscriber to receive notifications, as defined on dev.fitbit.com. If not present, the default subscriber is used.

【Context No.51】
**Supported:** `application/json`
accept-locale | optional | The locale to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
**Examples**
  * URL
  * CURL
POST https://api.fitbit.com/oauth2/revoke
Authorization: Basic <basic_token>
Content-Type: application/x-www-form-urlencoded
token=<access_token or refresh_token to be revoked>
**Revoking tokens used by public clients**
POST https://api.fitbit.com/oauth2/revoke
Content-Type: application/x-www-form-urlencoded
client_id=<public_client_id>&token=<access_token or refresh_token to be
revoked>
curl -X POST "https://api.fitbit.com/oauth2/revoke" \
-H "content-type: application/x-www-form-urlencoded" \
-H "Authorization: Basic <basic_token>" \
-d "token=<access_token or refresh_token to be revoked>"
**Revoking tokens used by public clients**
curl -X POST "https://api.fitbit.com/oauth2/revoke" \
-H "content-type: application/x-www-form-urlencoded" \
-d "client_id=<public_client_id>&token=<access_token or refresh_token to be revoked>"

* * *
## Response
**Response Headers**
content-type | The media type of the response content being sent to the client.
**Supported:** `application/json`
---|---
fitbit-rate-limit-limit | The quota number of calls.
fitbit-rate-limit-remaining | The number of calls remaining before hitting the rate limit.
fitbit-rate-limit-reset | The number of seconds until the rate limit resets.
> **Note:** The rate limit headers are approximate and asynchronously updated.
> This means that there may be a minor delay in the decrementing of remaining
> requests. This could result in your application receiving an unexpected 429
> response if you don't track the total number of requests you make yourself.

**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-messages/).
---|---
Status Message | Description of the status code.
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.
**Response Codes**
200 | A successful request.

【Context No.52】
# Get All Activity Types
Retrieves a list of all valid Fitbit public activities and the private, user-
created activities from the Fitbit activities database in the format
requested. If available, activity level details will display.
**Scope:** _activity_
* * *
## Request
GET | /1/activities.json
---|---
**Request Headers** authorization | required | Specify the token type and Fitbit user’s access token.
**Token type:** `Bearer`
---|---|---
accept | optional | The media type of the response content the client is expecting.
**Supported:** `application/json`
accept-language | recommended | The measurement unit system to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
accept-locale | optional | The locale to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
**Examples**
  * URL
  * CURL
GET https://api.fitbit.com/1/activities.json
curl -X GET https://api.fitbit.com/1/activities.json" \
-H "accept: application/json" \
-H "authorization: Bearer <access_token>"

* * *
## Response
  * Description
  * Example Response
Element Name | Description
---|---
categories : activities : accessLevel | **Supported** : `PUBLIC` | `PRIVATE`
categories : activities : activityLevels : id | Numerical value representing the corresponding activity level.
categories : activities : activityLevels : maxSpeedMPH | Maximum speed in MPH. Value: -1 means not applicable.
categories : activities : activityLevels : mets | METs score for the activity id.
categories : activities : activityLevels : minSpeedMPH | Minimum speed in MPH. Value: -1 means not applicable.
categories : activities : activityLevels : name | Name of the activity level.
categories : activities : hasSpeed | **Supported** : `true` | `false`
categories : activities : id | Numerical value representing the corresponding activity.
categories : activities : name | The name of the activity or exercise.

**Response Headers** content-type | The media type of the response content being sent to the client.
**Supported:** `application/json`
---|---
fitbit-rate-limit-limit | The quota number of calls.
fitbit-rate-limit-remaining | The number of calls remaining before hitting the rate limit.

【Context No.53】
# OAuth2 Token
The /oauth2/token endpoint can do the following:
  * Exchange the authorization code for the initial access token and refresh token (See [OAuth2 Token](/build/reference/web-api/authorization/oauth2-token)). This process is required when using the Authorization Code Grant Flow.
  * Obtain a new access token and refresh token when the existing access token has expired (See [Refresh Token](/build/reference/web-api/authorization/refresh-token/)).
  * Initiate the Client Credentials authorization flow (See [Client Credentials](/build/reference/web-api/authorization/client-credentials/)).
* * *
## Request
POST | /oauth2/token
---|---
**Body Parameters**
**code**
_required_ | The authorization code received in the redirect as a URI parameter. The authorization code is only valid for 10 minutes. **Type:** string
---|---
**grant_type**
_required_ | **Supported:** `authorization_code` **Type:** string
**client_id**
_required for client apps_ | This is your Fitbit API application ID from your settings on <https://dev.fitbit.com>. Apps set to type "client" should use this to pass their ID instead of the Authorization header. **Type:** string
**redirect_uri**
_recommended / required_ | Required if specified in the redirect to the authorization page. Must be exact match. **Type:** URI
**expires_in**
_optional_ | Specifies the desired access token lifetime.  `28800` for 8 hours **Supported:** 28800 **Type:** integer
**code_verifier**
(For use with PKCE only)
_required_ | The code verifier is used to derive the code challenge while obtaining the access code in the authorization request. This string is the base64url-encoding of a cryptographically, random-generated octet sequence. **Type:** string
**Request Headers** authorization | (For use with server apps only)
required | Must be set to Basic followed by a space, then the Base64 encoded string of your application's client id and secret concatenated with a colon. For example, the Base64 encoded string, **Y2xpZW50X2lkOmNsaWVudCBzZWNyZXQ=** , is decoded as **"client_id:client secret"**. **Token type:** `Basic`
---|---|---
accept | optional | The media type of the response content the client is expecting.

【Context No.54】
**Examples**
  * URL
  * CURL
POST
https://api.fitbit.com/1/user/-/body/log/weight/goal.json?startDate=2019-03-21&startWeight=200&weight=180.5
POST
https://api.fitbit.com/1/user/GGNJL9/body/log/weight/goal.json?startDate=2019-03-21&startWeight=200&weight=180.5
curl -X POST
"https://api.fitbit.com/1/user/-/body/log/weight/goal.json?startDate=2019-03-21&startWeight=200"
\
-H "accept: application/json" \
-H "authorization: Bearer <access_token>" \
-H "content-length: <message_body_size>"

* * *
## Response
  * Description
  * Example Response
Element Name | Description
---|---
goal : goalType | The goal type.
**Supported:** `LOSE` | `GAIN` | `MAINTAIN`
goal : startDate | The goal start date.
goal : startWeight | User's weight when goal was established.
goal : weight | The weight goal to achieve.
goal : weightThreshold | The recommended amount of weight to lose each week to achieve and maintain goal.

**Response Headers**
content-type | The media type of the response content being sent to the client.
**Supported:** `application/json`
---|---
fitbit-rate-limit-limit | The quota number of calls.
fitbit-rate-limit-remaining | The number of calls remaining before hitting the rate limit.
fitbit-rate-limit-reset | The number of seconds until the rate limit resets.
> **Note:** The rate limit headers are approximate and asynchronously updated.
> This means that there may be a minor delay in the decrementing of remaining
> requests. This could result in your application receiving an unexpected 429
> response if you don't track the total number of requests you make yourself.

**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-messages/).
---|---
Status Message | Description of the status code.
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.
**Response Codes**
201 | A successful request.

【Context No.55】
This could result in your application receiving an unexpected 429
> response if you don't track the total number of requests you make yourself.

**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-messages/
---|---
Status Message | Description of the status code.
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.
**Response Codes**
201 | A successful request.
---|---
400 | The request had bad syntax or was inherently impossible to be satisfied.
401 | The request requires user authentication.
> **Note:** For a complete list of response codes, please refer to the
> [Troubleshooting Guide](/build/reference/web-api/troubleshooting-
> guide/error-messages/

## Additional Information
### "source" values
This field returns information on whether the user’s body fat or weight data
was automatically or manually entered. It includes the following values:
  1. **API** : The weight and/or body fat data originated from a 3rd party integration using the Web API, the data was manually entered into the Fitbit mobile or web application, or the data recorded by a predefined scale was manually edited.
  2. **Aria** : The weight and/or body fat data originated from an Aria or Aria 2 scale.
  3. **AriaAir** : The weight and/or body fat data originated from an Aria Air scale.
  4. **Withings** : The weight and/or body fat data originated from a Withings scale.
[![previous](/images/next-4a798552f1301bc41839afd0a22e5e82.svg)](/build/reference/web-
api/body/create-weight-goal/)
[Create Weight Goal](/build/reference/web-api/body/create-weight-goal/)
[Delete Body Fat Log](/build/reference/web-api/body/delete-bodyfat-log/)
[![next](/images/next-4a798552f1301bc41839afd0a22e5e82.svg)](/build/reference/web-
api/body/delete-bodyfat-log/)

【Context No.56】
fitbit-rate-limit-remaining | The number of calls remaining before hitting the rate limit.
fitbit-rate-limit-reset | The number of seconds until the rate limit resets.
> **Note:** The rate limit headers are approximate and asynchronously updated.
> This means that there may be a minor delay in the decrementing of remaining
> requests. This could result in your application receiving an unexpected 429
> response if you don't track the total number of requests you make yourself.

**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-messages/).
---|---
Status Message | Description of the status code.
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.
**Response Codes**
200 | Returned if the given user is already subscribed to the stream using the same subscription ID.
---|---
201 | Returned if a new subscription was created in response to your request.
409 | Returned if the given user is already subscribed to this stream using a different subscription ID, OR if the given subscription ID is already used to identify a subscription to a different stream.
**Conflicts**
A single user can only subscribe to the same stream once. If a conflict arises
trying to add a subscription, the server will respond with an HTTP 409
Conflict. It will still return the same response elements, but in this case,
the body will tell you that the subscription already exists so that corrective
action must be taken.
> **Note:** For a complete list of response codes, please refer to the
> [Troubleshooting Guide](/build/reference/web-api/troubleshooting-
> guide/error-messages/).

## Additional Information
### Activity webhook notifications
The Fitbit Web API can send notifications when a Fitbit user has new data to
download. This is possible by implementing the Subscription API and
subscribing to one or more data collections. See [ Using
Subscriptions](/build/reference/web-api/developer-guide/using-subscriptions/).
Whenever the activity service recognizes a change to the user’s data, a
notification is sent to your application’s subscriber.
The activity collection recognizes changes to a user’s recorded activities,
step count, calories burned, distance traveled, etc.

【Context No.57】
Lap : StartTime | Timestamp representing each lap's start time.
Lap : TotalTimeSeconds | Length of the exercise lap in seconds.
Lap : DistanceMeters | Number of meters traveled during the exercise lap. See [Distance](/build/reference/web-api/activity/get-activity-tcx/#Distance)
Lap : Calories | Number of calories burned during the exercise lap.
Lap : Intensity | Specifies when the user is in an "active" or "resting" state during an interval activity. Currently, "active" is returned for all activities, and "resting" is not supported.
**Supported** : `Active`
Lap : TriggerMethod | Value associated with the recorded exercise's logType.
Track : Trackpoint : Time | The time metrics were recorded during the exercise.
Track : Trackpoint : Position : LatitudeDegrees | The GPS latitude recorded at the specified time.
Track : Trackpoint : pPosition : LongitudeDegrees | The GPS longitude recorded at the specified time.
Track : Trackpoint : AltitudeMeters | The altitude in meters recorded at the specified time.
Track : Trackpoint : DistanceMeters | The distance in meters recorded at the specified time.
Track : Trackpoint : HeartRateBpm : Value | The heart rate recorded at the specified time.
_Heart Rate_ scope is required to see this value.
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
2020-01-01T14:59:42.000-07:00 1077.0 1585.9 221 Active Manual
2020-04-01T14:59:42.000-07:00 37.906381487846375 -122.06224000453949
44.959400001389895 0.0 105 . . .  0 0

**Response Headers**
content-type | The media type of the response content being sent to the client.
**Supported:** `application/json`
---|---
fitbit-rate-limit-limit | The quota number of calls.
fitbit-rate-limit-remaining | The number of calls remaining before hitting the rate limit.
fitbit-rate-limit-reset | The number of seconds until the rate limit resets.
> **Note:** The rate limit headers are approximate and asynchronously updated.
> This means that there may be a minor delay in the decrementing of remaining
> requests.

【Context No.58】
# Create Food Goal
Creates or updates a user's daily calorie consumption or food plan goals.
**Scope:** _nutrition_
* * *
## Request
POST |  /1/user/[user-id]/foods/log/goal.json
---|---
**URI Arguments**
user-id | required | The encoded ID of the user. Use "-" (dash) for current logged-in user.
---|---|---
**Query Parameters**
calories | optional/required | Manual calories consumption goal. Either `calories` or `intensity` must be provided. | integer
---|---|---|---
intensity | optional/required | Food plan intensity. Either `calories` or `intensity` must be provided.
**Supported** : `MAINTENANCE` | `EASIER` | `MEDIUM` | `KINDAHARD` | `HARDER` | string
personalized | optional | Food plan type.
**Supported** : `true` | `false` | boolean
**Request Headers** authorization | required | Specify the token type and Fitbit user’s access token.
**Token type:** `Bearer`
---|---|---
accept | optional | The media type of the response content the client is expecting.
**Supported:** `application/json`
accept-language | recommended | The measurement unit system to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
accept-locale | optional | The locale to use for response values. See [Localization](/build/reference/web-api/developer-guide/application-design/#Localization).
content-length | required | According to [RFC 7230, section 3.3.2](https://tools.ietf.org/html/rfc7230#section-3.3.2), this HTTP request requires the Content-Length header field containing the anticipated size of the payload body.

【Context No.59】
**Response Type**
HTTP Status Code | HTTP response code. List of codes are found in the [Troubleshooting Guide](/build/reference/web-api/troubleshooting-guide/error-messages/).
---|---
Status Message | Description of the status code.
Response Body | Contains the JSON response to the API call. When errors are returned by the API call, the errorType, fieldName and message text will provide more information to the cause of the failure.
**Response Codes**
201 | A successful request.
---|---
400 | The request had bad syntax or was inherently impossible to be satisfied.
401 | The request requires user authentication.
> **Note:** For a complete list of response codes, please refer to the
> [Troubleshooting Guide](/build/reference/web-api/troubleshooting-
> guide/error-messages/).

## Additional Information
### "source" values
This field returns information on whether the user’s body fat or weight data
was automatically or manually entered. It includes the following values:
  1. **API** : The weight and/or body fat data originated from a 3rd party integration using the Web API, the data was manually entered into the Fitbit mobile or web application, or the data recorded by a predefined scale was manually edited.
  2. **Aria** : The weight and/or body fat data originated from an Aria or Aria 2 scale.
  3. **AriaAir** : The weight and/or body fat data originated from an Aria Air scale.
  4. **Withings** : The weight and/or body fat data originated from a Withings scale.
[![previous](/images/next-4a798552f1301bc41839afd0a22e5e82.svg)](/build/reference/web-
api/body/create-bodyfat-goal/)
[Create Body Fat Goal](/build/reference/web-api/body/create-bodyfat-goal/)
[Create Weight Goal](/build/reference/web-api/body/create-weight-goal/)
[![next](/images/next-4a798552f1301bc41839afd0a22e5e82.svg)](/build/reference/web-
api/body/create-weight-goal/)
```

## Technical Specifications for latest code
```
【Context No.1】
[
  {
    "activityId": 90013,
    "calories": -1,
    "description": "Walking less than 2 mph, strolling very slowly",
    "distance": 1.61,
    "duration": 1178000,
    "name": "Walk"
  },
  {
    "activityId": 15000,
    "calories": 0,
    "description": "",
    "distance": 0,
    "duration": 1228000,
    "name": "Sport"
  }
]

【Context No.2】
[
  {
    "activityId": 90013,
    "calories": -1,
    "description": "Walking less than 2 mph, strolling very slowly",
    "distance": 1.61,
    "duration": 1178000,
    "name": "Walk"
  },
  {
    "activityId": 1071,
    "calories": 0,
    "description": "",
    "distance": 0,
    "duration": 973000,
    "name": "Outdoor Bike"
  }
]

【Context No.3】
{
  "goals": {
    "calories": 2910
  }
}

【Context No.4】
{
    "goals": {
        "activeZoneMinutes": 150,
        "distance": 56.33,
        "floors": 70,
        "steps": 70000
    }
}

【Context No.5】
{
  "activityLog": {
    "activityId": 90013,
    "activityParentId": 90013,
    "activityParentName": "Walk",
    "calories": 300,
    "description": "Walking less than 2 mph, strolling very slowly",
    "distance": 2,
    "duration": 6000000,
    "hasActiveZoneMinutes": true,
    "hasStartTime": true,
    "isFavorite": false,
    "lastModified": "2023-06-05T18:39:39.035Z",
    "logId": 56268507015,
    "name": "Walk",
    "startDate": "2023-06-01",
    "startTime": "10:30",
    "steps": 2706
  }
}

【Context No.6】
{
    "goals": {
        "activeMinutes": 55,
        "activeZoneMinutes": 21,
        "caloriesOut": 3500,
        "distance": 5,
        "floors": 10,
        "steps": 10000
    }
}

【Context No.7】
[
  {
    "activityId": 15680,
    "description": "",
    "mets": 6,
    "name": "Tennis, doubles"
  }
]

【Context No.8】
"fairlyActiveMinutes": 0,
    "floors": 0,
    "heartRateZones": [
      {
        "caloriesOut": 1200.33336,
        "max": 86,
        "min": 30,
        "minutes": 812,
        "name": "Out of Range"
      },
      {
        "caloriesOut": 1409.4564,
        "max": 121,
        "min": 86,
        "minutes": 619,
        "name": "Fat Burn"
      },
      {
        "caloriesOut": 6.98904,
        "max": 147,
        "min": 121,
        "minutes": 1,
        "name": "Cardio"
      },
      {
        "caloriesOut": 0,
        "max": 220,
        "min": 147,
        "minutes": 0,
        "name": "Peak"
      }
    ],
    "lightlyActiveMinutes": 110,
    "marginalCalories": 281,
    "restingHeartRate": 77,
    "sedentaryMinutes": 802,
    "steps": 1698,
    "useEstimation": true,
    "veryActiveMinutes": 0
  }
}

【Context No.9】
{
  "goals": {
    "calories": 1800
  }
}

or

{
  "foodPlan": {
    "estimatedDate": "2023-01-01",
    "intensity": "HARDER",
    "personalized": true
  },
  "goals": {
    "calories": 2200
  }
}

【Context No.10】
{
  "activity": {
    "accessLevel": "PUBLIC",
    "activityLevels": [
      {
        "id": 1010,
        "maxSpeedMPH": 9.9,
        "mets": 4,
        "minSpeedMPH": -1,
        "name": "under 10 mph"
      },
      {
        "id": 1020,
        "maxSpeedMPH": 11.9,
        "mets": 6,
        "minSpeedMPH": 10,
        "name": "10-11.9 mph"
      }
    ],
    "hasSpeed": true,
    "id": 90001,
    "name": "Bike"
  }
}

【Context No.11】
{
    "meta": {
        "retryDuration": 3000,
        "state": "pending"
    }
}

【Context No.12】
{
  "activities": [],
  "goals": {
    "activeMinutes": 30,
    "caloriesOut": 1950,
    "distance": 8.05,
    "floors": 10,
    "steps": 6800
  },
  "summary": {
    "activeScore": -1,
    "activityCalories": 525,
    "calorieEstimationMu": 2241,
    "caloriesBMR": 1973,
    "caloriesOut": 2628,
    "caloriesOutUnestimated": 2628,
    "customHeartRateZones": [
      {
        "caloriesOut": 2616.7788,
        "max": 140,
        "min": 30,
        "minutes": 1432,
        "name": "Below"
      },
      {
        "caloriesOut": 0,
        "max": 165,
        "min": 140,
        "minutes": 0,
        "name": "Custom Zone"
      },
      {
        "caloriesOut": 0,
        "max": 220,
        "min": 165,
        "minutes": 0,
        "name": "Above"
      }
    ],
    "distances": [
      {
        "activity": "total",
        "distance": 1.26
      },
      {
        "activity": "tracker",
        "distance": 1.26
      },
      {
        "activity": "loggedActivities",
        "distance": 0
      },
      {
        "activity": "veryActive",
        "distance": 0
      },
      {
        "activity": "moderatelyActive",
        "distance": 0
      },
      {
        "activity": "lightlyActive",
        "distance": 1.25
      },
      {
        "activity": "sedentaryActive",
        "distance": 0
      }
    ],
    "elevation": 0,
    "fairlyActiveMinutes": 0,
    "floors": 0,
    "heartRateZones": [
      {
        "caloriesOut": 1200.33336,

【Context No.13】
[
  {
    "accessLevel": "PUBLIC",
    "amount": 1,
    "brand": "",
    "calories": 80,
    "dateLastEaten": "2020-06-10",
    "foodId": 81409,
    "locale": "en_US",
    "mealTypeId": 1,
    "name": "Apple",
    "unit": {
      "id": 204,
      "name": "medium",
      "plural": "mediums"
    },
    "units": [
      204,
      179,
      226,
      180,
      147,
      389
    ]
  }
]

【Context No.14】
{
  "goal": {
    "goalType": "LOSE",
    "startDate": "2019-03-21",
    "startWeight": 200,
    "weight": 180.5,
    "weightThreshold": 0.05
  }
}

【Context No.15】
[
  {
    "battery": "Medium",
    "batteryLevel": 60,
    "deviceVersion": "Charge 2",
    "features": [],
    "id": "816713257",
    "lastSyncTime": "2019-11-07T12:00:58.000",
    "mac": "16ADD56D54GD",
    "type": "TRACKER"
  }
]

【Context No.16】
{
  "categories": [
    {
      "activities": [
        {
          "accessLevel": "PUBLIC",
          "activityLevels": [
            {
              "id": 3016,
              "maxSpeedMPH": -1,
              "mets": 8.5,
              "minSpeedMPH": -1,
              "name": "6 - 8 inch step"
            },
            {
              "id": 3017,
              "maxSpeedMPH": -1,
              "mets": 10,
              "minSpeedMPH": -1,
              "name": "10 - 12 inch step"
            }
          ],
          "hasSpeed": false,
          "id": 90004,
          "name": "Aerobic step"
        },
        {
          "accessLevel": "PUBLIC",
          "hasSpeed": false,
          "id": 3015,
          "mets": 6.5,
          "name": "Aerobic, general"
        },
.
.
.

【Context No.17】
{
  "activities": [
    {
      "activeDuration": 1536000,
      "activityLevel": [
        {
          "minutes": 3,
          "name": "sedentary"
        },
        {
          "minutes": 9,
          "name": "lightly"
        },
        {
          "minutes": 2,
          "name": "fairly"
        },
        {
          "minutes": 11,
          "name": "very"
        }
      ],
      "activityName": "Walk",
      "activityTypeId": 90013,
      "calories": 204,
      "caloriesLink": "https://api.fitbit.com/1/user/-/activities/calories/date/2019-01-03/2019-01-03/1min/time/12:08/12:34.json",
      "duration": 1536000,
      "elevationGain": 0,
      "lastModified": "2019-01-04T19:31:15.000Z",
      "logId": 19018673358,
      "logType": "auto_detected",
      "manualValuesSpecified": {
        "calories": false,
        "distance": false,
        "steps": false
      },
      "originalDuration": 1536000,
      "originalStartTime": "2019-01-03T12:08:29.000-08:00",
      "startTime": "2019-01-03T12:08:29.000-08:00",
      "steps": 1799,
      "tcxLink": "https://api.fitbit.com/1/user/-/activities/19018673358.tcx"
    }
  ],
  "pagination": {
    "afterDate": "2019-01-01",
    "limit": 1,
    "next": "https://api.fitbit.com/1/user/-/activities/list.json?offset=0&limit=1&sort=asc&afterDate=2019-01-01",
    "offset": 0,
    "previous": "",
    "sort": "asc"
  }
}

【Context No.18】
{
  "best": {
    "total": {
      "distance": {
        "date": "2016-07-17",
        "value": 28.69259
      },
      "floors": {
        "date": "2018-05-28",
        "value": 73.00000011096
      },
      "steps": {
        "date": "2016-07-17",
        "value": 38826
      }
    },
    "tracker": {
      "distance": {
        "date": "2016-07-17",
        "value": 28.69259
      },
      "floors": {
        "date": "2018-05-28",
        "value": 73.00000011096
      },
      "steps": {
        "date": "2016-07-17",
        "value": 38826
      }
    }
  },
  "lifetime": {
    "total": {
      "activeScore": -1,
      "caloriesOut": -1,
      "distance": 8302.5,
      "floors": 10278,
      "steps": 11152512
    },
    "tracker": {
      "activeScore": -1,
      "caloriesOut": -1,
      "distance": 8288.26,
      "floors": 10278,
      "steps": 11133281
    }
  }
}

【Context No.19】
{
  "goal": {
    "fat": 25
  }
}

【Context No.20】
9.99 * weightKg + 6.25*heightCm - 4.92*ageYears + s, where s is +5 for
males and -161 for female

【Context No.21】
TEE = 387 - 7.31 x age (years) + 1.0 x (10.9 x weight(kg) + 660.7 x height
(meters))

【Context No.22】
https://www.fitbit.com/oauth2/authorize?response_type=code
    &client_id=<client ID>
    &redirect_uri=https%3A%2F%2Fexample.com%2Fcallback
    &code_challenge=E9Melhoa2OwvFrEMTJgCHaoeK1t8URWbuGJSstw-cM
    &code_challenge_method=S256
    &scope=activity%20nutrition%20heartrate%20location%20...

【Context No.23】
9.99 * weightKg + 6.25*heightCm - 4.92*ageYears + s, where s is +5 for 
males
and -161 for female

【Context No.24】
Weight Goal
{
  "goal": {
    "goalType": "LOSE",
    "startDate": "2018-06-13",
    "startWeight": 105.28,
    "weight": 99.79,
    "weightThreshold": 0.05
  }
}

Body Fat Goal
{
  "goal": {
    "fat": 25
  }
}

【Context No.25】
https://www.fitbit.com/oauth2/authorize?response_type=code
    &client_id=<client ID>
    &redirect_uri=https%3A%2F%2Fexample.com%2Fcallback
    &scope=activity%20nutrition%20heartrate%20location%20...

【Context No.26】
{
    "waterLog":{
       "logId":1543654,
       "amount":12
    }
}

【Context No.27】
{
    "ecgReadings": [
    {
        "startTime": "2022-09-28T17:12:30.222",
        "averageHeartRate": 70,
        "resultClassification": "Normal Sinus Rhythm",
        "waveformSamples": [
            130,
            176,
            252,
            365,
            ...
        ],
        "samplingFrequencyHz": "250",
        "scalingFactor": 10922,
        "numberOfWaveformSamples": 7700,
        "leadNumber": 1,
        "featureVersion": "1.2.3-2.11-2.14",
        "deviceName": "Sense",
        "firmwareVersion": "1.2.3"
    }
    ],
    pagination : {
        "afterDate": "2022-09-28T20:00:00",
        "limit": 1,
        "next": "https://api.fitbit.com/1/user/-/ecg/list.json?offset=10&limit=10&sort=asc&afterDate=2022-09-28T21:00:00",
        "offset": 0
        "previous": "",
        "sort": "asc"    }}

【Context No.28】
https://www.fitbit.com/oauth2/authorize?response_type=token
    &client_id=<client ID>
    &redirect_uri=https%3A%2F%2Fexample.com%2Fcallback
    &expires_in=604800
    &scope=activity%20nutrition%20heartrate%20location%20...

【Context No.29】
TEE = 864 - 9.72 x age (years) + 1.0 x (14.2 x weight(kg) + 503 x height
(meters))

【Context No.30】
https://example.com/callback?code=<authorization_code>#_=_0

【Context No.31】
[
  {
    "accessLevel": "PUBLIC",
    "amount": 1,
    "brand": "Smucker's",
    "calories": 100,
    "dateLastEaten": "2019-05-06",
    "foodId": 14724757,
    "locale": "en_US",
    "mealTypeId": 1,
    "name": "Natural Peanut Butter, Chunky",
    "unit": {
      "id": 349,
      "name": "tbsp",
      "plural": "tbsp"
    },
    "units": [
      349,
      364,
      226,
      180,
      147,
      389
    ]
  }
]

【Context No.32】
{
  "food": {
    "accessLevel": "PUBLIC",
    "brand": "",
    "calories": 79,
    "defaultServingSize": 1,
    "defaultUnit": {
      "id": 91,
      "name": "cup",
      "plural": "cups"
    },
    "foodId": 17877,
    "isGeneric": false,
    "locale": "en_US",
    "name": "Blueberry, Unsweetened, Frozen",
    "servings": [
      {
        "multiplier": 1,
        "servingSize": 1,
        "unit": {
          "id": 91,
          "name": "cup",
          "plural": "cups"
        },
        "unitId": 91
      },
      {
        "multiplier": 2,
        "servingSize": 1,
        "unit": {
          "id": 256,
          "name": "pint",
          "plural": "pints"
        },
        "unitId": 256
      },
      {
        "multiplier": 4,
        "servingSize": 1,
        "unit": {
          "id": 279,
          "name": "quart",
          "plural": "quarts"
        },
        "unitId": 279
      },
      {
        "multiplier": 3.658064603805542,
        "servingSize": 20,
        "unit": {
          "id": 226,
          "name": "oz",
          "plural": "oz"
        },
        "unitId": 226
      },
      {
        "multiplier": 2.9264516830444336,
        "servingSize": 1,
        "unit": {
          "id": 180,
          "name": "lb",
          "plural": "lbs"
        },
        "unitId": 180
      },
      {
        "multiplier": 0.6451612710952759,
        "servingSize": 100,
        "unit": {
          "id": 147,
          "name": "gram",

【Context No.33】
{
"collectionType":"activities",
"ownerId":"GGNJL9",
"ownerType":"user",
"subscriberId":"1",
"subscriptionId":"320"
}

【Context No.34】
{
  "foods": [
    {
      "accessLevel": "PUBLIC",
      "brand": "",
      "calories": 82,
      "defaultServingSize": 1,
      "defaultUnit": {
        "id": 91,
        "name": "cup",
        "plural": "cups"
      },
      "foodId": 82547,
      "isGeneric": true,
      "locale": "en_US",
      "name": "Blueberries",
      "units": [
        91,
        226,
        304,
        20,
        256,
        147
      ]
    },
    {
      "accessLevel": "PUBLIC",
      "brand": "FreshBerry",
      "calories": 15,
      "defaultServingSize": 1,
      "defaultUnit": {
        "id": 226,
        "name": "oz",
        "plural": "oz"
      },
      "foodId": 14046577,
      "isGeneric": false,
      "locale": "en_US",
      "name": "Blueberries",
      "units": [
        226
      ]
    },
.
.
.

【Context No.35】
{
  "activities-steps": [
    {
      "dateTime": "2019-01-01",
      "value": "0"
    }
  ],
  "activities-steps-intraday": {
    "dataset": [
      {
        "time": "08:00:00",
        "value": 0
      },
      {
        "time": "08:01:00",
        "value": 0
      },
      {
        "time": "08:02:00",
        "value": 0
      },


[...]

      {
        "time": "08:30:00",
        "value": 0
      }
    ],
    "datasetInterval": 1,
    "datasetType": "minute"
  }
}

【Context No.36】
{
  "waterLog": {
    "amount": 8,
    "logId": 6088037892
  }
}

【Context No.37】
{
  "errors": [
    {
      "errorType": "expired_token",
      "message": "Access token expired: eyJhbGciOiJIUzI1NiJ9...."
    }
  ]
}

【Context No.38】
{
  "goal": {
    "goal": 24,
    "startDate": "2019-03-21"
  }
}

【Context No.39】
{
    "meta": {
        "retryDuration": 3000,
        "state": "pending"
    }
    "sleep": [
        {{ existing sleep details }}
    ],
      "summary": {
    "stages": {
      "deep": 104,
      "light": 205,
      "rem": 75,
      "wake": 78
    },

    "summary": {
        stages: {
            "deep": 55,
            "light": 176,
            "rem": 65,
            "wake": 21
        }
        "totalMinutesAsleep": 296,
        "totalSleep Records": 2,
        "totalTimeInBed": 317
    }
}

【Context No.40】
{
  "activities-heart": [
    {
      "dateTime": "2019-05-08",
      "value": {
        "customHeartRateZones": [
          {
            "caloriesOut": 1164.09312,
            "max": 90,
            "min": 30,
            "minutes": 718,
            "name": "Below"
          },
          {
            "caloriesOut": 203.65344,
            "max": 110,
            "min": 90,
            "minutes": 74,
            "name": "Custom Zone"
          },
          {
            "caloriesOut": 330.76224,
            "max": 220,
            "min": 110,
            "minutes": 42,
            "name": "Above"
          }
        ],
        "heartRateZones": [
          {
            "caloriesOut": 979.43616,
            "max": 86,
            "min": 30,
            "minutes": 626,
            "name": "Out of Range"
          },
          {
            "caloriesOut": 514.16208,
            "max": 121,
            "min": 86,
            "minutes": 185,
            "name": "Fat Burn"
          },
          {
            "caloriesOut": 197.92656,
            "max": 147,
            "min": 121,
            "minutes": 18,
            "name": "Cardio"
          },
          {
            "caloriesOut": 6.984,
            "max": 220,
            "min": 147,
            "minutes": 5,
            "name": "Peak"
          }
        ],
        "restingHeartRate": 76
      }
    }
  ],
  "activities-heart-intraday": {
    "dataset": [
      {
        "time": "00:00:00",
        "value": 78
      },
      {
        "time": "00:01:00",
        "value": 78
      },
      {
        "time": "00:02:00",
        "value": 77
      },

【Context No.41】
{
  "foods": [
    {
      "isFavorite": true,
      "logDate": "2019-03-21",
      "logId": 17406206369,
      "loggedFood": {
        "accessLevel": "PUBLIC",
        "amount": 1,
        "brand": "Subway",
        "calories": 280,
        "foodId": 14022778,
        "locale": "en_US",
        "mealTypeId": 3,
        "name": "6 inch Turkey Breast",
        "unit": {
          "id": 296,
          "name": "sandwich",
          "plural": "sandwiches"
        },
        "units": [
          296,
          226,
          180,
          147,
          389
        ]
      },
      "nutritionalValues": {
        "calories": 280,
        "carbs": 46,
        "fat": 3.5,
        "fiber": 5,
        "protein": 18,
        "sodium": 760
      }
    }
  ],
  "goals": {
    "calories": 2910
  },
  "summary": {
    "calories": 280,
    "carbs": 46,
    "fat": 3.5,
    "fiber": 5,
    "protein": 18,
    "sodium": 760,
    "water": 0
  }
}

【Context No.42】
{
    "name" : ,
    "description" : ,
    "mealFoods" : [
        {
            "foodId" : ,
            "amount" : ,
            "unitId" : 
        },
        <...>
    ]
}

【Context No.43】
{
        "multiplier": 0.6451612710952759,
        "servingSize": 100,
        "unit": {
          "id": 147,
          "name": "gram",
          "plural": "grams"
        },
        "unitId": 147
      },
      {
        "multiplier": 6.45172119140625,
        "servingSize": 1,
        "unit": {
          "id": 389,
          "name": "kg",
          "plural": "kg"
        },
        "unitId": 389
      }
    ],
    "units": [
      91,
      256,
      279,
      226,
      180,
      147,
      389
    ]
  }
}

【Context No.44】
{
  "summary": {
    "water": 1892.7099609375
  },
  "water": [
    {
      "amount": 1892.7099609375,
      "logId": 6088001986
    }
  ]
}

【Context No.45】
[
  {
    "id": 1,
    "name": "almond",
    "plural": "almonds"
  },
  {
    "id": 2,
    "name": "anchovy",
    "plural": "anchovies"
  },
  {
    "id": 3,
    "name": "anisette-sponge",
    "plural": "anisette-sponges"
  }, 
.
.
.

【Context No.46】
{
  "foodLog": {
    "isFavorite": false,
    "logDate": "2020-06-10",
    "logId": 22100146659,
    "loggedFood": {
      "accessLevel": "PUBLIC",
      "amount": 1,
      "brand": "",
      "calories": 130,
      "foodId": 81409,
      "locale": "en_US",
      "mealTypeId": 1,
      "name": "Apple",
      "unit": {
        "id": 179,
        "name": "large",
        "plural": "larges"
      },
      "units": [
        204,
        179,
        226,
        180,
        147,
        389
      ]
    },
    "nutritionalValues": {
      "calories": 130,
      "carbs": 35.75,
      "fat": 0,
      "fiber": 8.13,
      "protein": 0,
      "sodium": 0
    }
  }
}

【Context No.47】
{
  "food": {
    "accessLevel": "PRIVATE",
    "brand": "",
    "calories": 200,
    "creatorEncodedId": "GGNJL9",
    "defaultServingSize": 1,
    "defaultUnit": {
      "id": 304,
      "name": "serving",
      "plural": "servings"
    },
    "foodId": 753871120,
    "isGeneric": false,
    "name": "Lasagna",
    "nutritionalValues": {
      "biotin": 0,
      "calcium": 0,
      "calories": 200,
      "caloriesFromFat": 0,
      "cholesterol": 0,
      "copper": 0,
      "dietaryFiber": 0,
      "folicAcid": 0,
      "iodine": 0,
      "iron": 0,
      "magnesium": 0,
      "niacin": 0,
      "pantothenicAcid": 0,
      "phosphorus": 0,
      "potassium": 0,
      "protein": 0,
      "riboflavin": 0,
      "saturatedFat": 0,
      "sodium": 0,
      "sugars": 0,
      "thiamin": 0,
      "totalCarbohydrate": 0,
      "totalFat": 0,
      "transFat": 0,
      "vitaminA": 0,
      "vitaminB12": 0,
      "vitaminB6": 0,
      "vitaminC": 0,
      "vitaminD": 0,
      "vitaminE": 0,
      "zinc": 0
    },
    "servings": [
      {
        "multiplier": 1,
        "servingSize": 1,
        "unit": {
          "id": 304,
          "name": "serving",
          "plural": "servings"
        },
        "unitId": 304
      }
    ],
    "units": [
      304
    ]
  }
}
```

## Output Indicator
Ensure that, except for the parts modified to follow the latest specifications, the structure and format of the code remain identical to the original code. Here, "identical" means that there should be no differences (diff) whatsoever, including in indentation, spaces, line breaks, and code structure, which should all be exactly the same as the original.
If there are any changes beyond the modified sections, this is considered incorrect.
Also, verify that the modified code conforms to the latest specifications.